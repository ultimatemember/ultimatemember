"object"!=typeof window.UM&&(window.UM={}),"object"!=typeof UM.frontend&&(UM.frontend={}),UM.frontend={cropper:{obj:null,init:function(){var e=jQuery(".um-modal .um-single-image-preview img").first();if(e.length&&""!==e.attr("src")){UM.frontend.cropper.obj&&UM.frontend.cropper.destroy();var t=jQuery(".um-modal .um-single-image-preview"),n=e.parent().data("crop"),r=e.parent().data("min_width"),d=e.parent().data("min_height"),i=e.parent().data("ratio"),a=jQuery(".um-modal").find("#um_upload_single").data("ratio"),a=(a&&(i=a.split(":")[0]),jQuery(window).height()-(jQuery(".um-modal-footer a").height()+20)-50-jQuery(".um-modal-header:visible").height());e.css({height:"auto"}),t.css({height:"auto"}),jQuery(window).height()<=400?(t.css({height:a+"px","max-height":a+"px"}),e.css({height:"auto"})):(e.css({height:"auto","max-height":a+"px"}),t.css({height:e.height(),"max-height":a+"px"}));let o;"square"===n?o={minWidth:r,minHeight:d,dragCrop:!1,aspectRatio:1,zoomable:!1,rotatable:!1,dashed:!1}:"cover"===n?(0<Math.round(r/i)&&(d=Math.round(r/i)),o={minWidth:r,minHeight:d,dragCrop:!1,aspectRatio:i,zoomable:!1,rotatable:!1,dashed:!1}):"user"===n&&(o={minWidth:r,minHeight:d,dragCrop:!0,aspectRatio:"auto",zoomable:!1,rotatable:!1,dashed:!1}),o&&(UM.frontend.cropper.obj=new Cropper(e[0],o))}},destroy:function(){0<jQuery(".cropper-container").length&&UM.frontend.cropper.obj&&(UM.frontend.cropper.obj.destroy(),UM.frontend.cropper.obj=null)}},dropdown:{init:function(){var o=jQuery(".um-dropdown");o.length&&o.um_dropdownMenu()}}},wp.hooks.addAction("um_remove_modal","um_common_frontend",function(){UM.frontend.cropper.destroy()}),wp.hooks.addAction("um_after_removing_preview","um_common_frontend",function(){UM.frontend.cropper.destroy()}),wp.hooks.addAction("um_window_resize","um_common_frontend",function(){UM.frontend.cropper.destroy()}),wp.hooks.addAction("um_member_directory_loaded","um_common_frontend",function(){UM.frontend.dropdown.init()}),wp.hooks.addAction("um_member_directory_build_template","um_common_frontend",function(){UM.frontend.dropdown.init()}),jQuery(document).ready(function(){UM.frontend.dropdown.init()});
