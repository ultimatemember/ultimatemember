function UM_hide_menus(){UM.dropdown.hideAll()}function UM_domenus(){jQuery(".um-dropdown").each(function(e,a){UM.dropdown.setPosition(a)})}function UM_check_password_matched(){jQuery(document).on("keyup","input[data-key=user_password],input[data-key=confirm_user_password]",function(e){var a=jQuery("input[data-key=user_password]").val(),t=jQuery("input[data-key=confirm_user_password]").val(),i=jQuery("input[data-key=user_password],input[data-key=confirm_user_password]");a||t?a!==t?i.removeClass("um-validate-matched").addClass("um-validate-not-matched"):i.removeClass("um-validate-not-matched").addClass("um-validate-matched"):i.removeClass("um-validate-matched").removeClass("um-validate-not-matched")})}function um_responsive(){jQuery(".um").each(function(){element_width=jQuery(this).width(),element_width<=340?(jQuery(this).removeClass("uimob340"),jQuery(this).removeClass("uimob500"),jQuery(this).removeClass("uimob800"),jQuery(this).removeClass("uimob960"),jQuery(this).addClass("uimob340")):element_width<=500?(jQuery(this).removeClass("uimob340"),jQuery(this).removeClass("uimob500"),jQuery(this).removeClass("uimob800"),jQuery(this).removeClass("uimob960"),jQuery(this).addClass("uimob500")):element_width<=800?(jQuery(this).removeClass("uimob340"),jQuery(this).removeClass("uimob500"),jQuery(this).removeClass("uimob800"),jQuery(this).removeClass("uimob960"),jQuery(this).addClass("uimob800")):element_width<=960?(jQuery(this).removeClass("uimob340"),jQuery(this).removeClass("uimob500"),jQuery(this).removeClass("uimob800"),jQuery(this).removeClass("uimob960"),jQuery(this).addClass("uimob960")):960<element_width&&(jQuery(this).removeClass("uimob340"),jQuery(this).removeClass("uimob500"),jQuery(this).removeClass("uimob800"),jQuery(this).removeClass("uimob960")),0<jQuery(".um-account-nav").length&&jQuery(".um-account-side").is(":visible")&&0==jQuery(".um-account-tab:visible").length&&jQuery(".um-account-side li a.current").trigger("click"),jQuery(this).css("opacity",1)}),jQuery(".um-cover, .um-member-cover, .um-cover-e").each(function(){var e=jQuery(this),a=e.data("ratio"),t=e.width(),a=a.split(":");calcHeight=Math.round(t/a[0])+"px",e.height(calcHeight),e.find(".um-cover-add").height(calcHeight)}),UM_domenus()}function um_reset_field(e){jQuery(e).find("div.um-field-area").find("input,textarea,select").not(":button, :submit, :reset, :hidden").val("").prop("checked",!1).prop("selected",!1)}function um_selected(e,a){if(e==a)return"selected='selected'"}function initImageUpload_UM(o){upload_help_text=o.data("upload_help_text")?'<span class="help">'+o.data("upload_help_text")+"</span>":"",icon=o.data("icon")?'<span class="icon"><i class="'+o.data("icon")+'"></i></span>':"",upload_text=o.data("upload_text")?'<span class="str">'+o.data("upload_text")+"</span>":"";var e=0;o.data("user_id")?e=o.data("user_id"):o.closest("[data-user_id]").length?e=o.closest("[data-user_id]").first().data("user_id"):jQuery("#um_upload_single:visible").data("user_id")&&(e=jQuery("#um_upload_single:visible").data("user_id")),o.uploadFile({url:wp.ajax.settings.url,method:"POST",multiple:!1,formData:{action:"um_imageupload",key:o.data("key"),set_id:o.data("set_id"),set_mode:o.data("set_mode"),_wpnonce:o.data("nonce"),timestamp:o.data("timestamp"),user_id:e},fileName:o.data("key"),allowedTypes:o.data("allowed_types"),maxFileSize:o.data("max_size"),dragDropStr:icon+upload_text+upload_help_text,sizeErrorStr:o.data("max_size_error"),extErrorStr:o.data("extension_error"),maxFileCountErrorStr:o.data("max_files_error"),maxFileCount:1,showDelete:!1,showAbort:!1,showDone:!1,showFileCounter:!1,showStatusAfterSuccess:!0,returnType:"json",onSubmit:function(e){o.parents(".um-modal-body").find(".um-error-block").remove()},onSuccess:function(e,a,t){o.selectedFiles=0,a.success&&0==a.success||void 0!==a.data.error?(o.parents(".um-modal-body").append('<div class="um-error-block">'+a.data.error+"</div>"),o.parents(".um-modal-body").find(".upload-statusbar").hide(0),UM.modal.responsive()):jQuery.each(a.data,function(e,a){var t=o.parents(".um-modal-body").find(".um-single-image-preview img"),i=o.parents(".um-modal-body").find(".um-single-image-preview"),d=new Date;t.attr("src",a.url+"?"+d.getTime()),t.data("file",a.file),t.on("load",function(){o.parents(".um-modal-body").find(".um-modal-btn.um-finish-upload.disabled").removeClass("disabled"),o.parents(".um-modal-body").find(".ajax-upload-dragdrop,.upload-statusbar").hide(0),i.show(0),UM.modal.responsive()})})},onError:function(e){console.log(e)}})}function initFileUpload_UM(i){upload_help_text=i.data("upload_help_text")?'<span class="help">'+i.data("upload_help_text")+"</span>":"",icon=i.data("icon")?'<span class="icon"><i class="'+i.data("icon")+'"></i></span>':"",upload_text=i.data("upload_text")?'<span class="str">'+i.data("upload_text")+"</span>":"";var e=0;i.data("user_id")?e=i.data("user_id"):i.closest("[data-user_id]").length?e=i.closest("[data-user_id]").first().data("user_id"):jQuery("#um_upload_single:visible").data("user_id")&&(e=jQuery("#um_upload_single:visible").data("user_id")),i.uploadFile({url:wp.ajax.settings.url,method:"POST",multiple:!1,formData:{action:"um_fileupload",key:i.data("key"),set_id:i.data("set_id"),set_mode:i.data("set_mode"),_wpnonce:i.data("nonce"),timestamp:i.data("timestamp"),user_id:e},fileName:i.data("key"),allowedTypes:i.data("allowed_types"),maxFileSize:i.data("max_size"),dragDropStr:icon+upload_text+upload_help_text,sizeErrorStr:i.data("max_size_error"),extErrorStr:i.data("extension_error"),maxFileCountErrorStr:i.data("max_files_error"),maxFileCount:1,showDelete:!1,showAbort:!1,showDone:!1,showFileCounter:!1,showStatusAfterSuccess:!0,onSubmit:function(e){i.parents(".um-modal-body").find(".um-error-block").remove()},onSuccess:function(e,a,t){i.selectedFiles=0,a.success&&0==a.success||void 0!==a.data.error?(i.parents(".um-modal-body").append('<div class="um-error-block">'+a.data.error+"</div>"),i.parents(".um-modal-body").find(".upload-statusbar").hide(0)):jQuery.each(a.data,function(e,a){i.parents(".um-modal-body").find(".um-modal-btn.um-finish-upload.disabled").removeClass("disabled"),i.parents(".um-modal-body").find(".ajax-upload-dragdrop,.upload-statusbar").hide(0),i.parents(".um-modal-body").find(".um-single-file-preview").show(0),"icon"==e?i.parents(".um-modal-body").find(".um-single-fileinfo i").removeClass().addClass(a):"icon_bg"==e?i.parents(".um-modal-body").find(".um-single-fileinfo span.icon").css({"background-color":a}):"filename"==e?i.parents(".um-modal-body").find(".um-single-fileinfo a").attr("data-file",a):"original_name"==e?(i.parents(".um-modal-body").find(".um-single-fileinfo a").attr("data-orignal-name",a),i.parents(".um-modal-body").find(".um-single-fileinfo span.filename").html(a)):"url"==e&&i.parents(".um-modal-body").find(".um-single-fileinfo a").attr("href",a)}),setTimeout(UM.modal.responsive,1e3)},onError:function(e){console.log(e)}})}function initCrop_UM(){var e,a,t=jQuery(".um-modal .um-single-image-preview img").first(),i=jQuery(".um-modal .um-single-image-preview"),d=t.parent().attr("data-crop"),o=t.parent().attr("data-min_width"),r=t.parent().attr("data-min_height"),s=t.parent().attr("data-ratio");jQuery(".um-modal").find("#um_upload_single").attr("data-ratio")&&(s=(s=jQuery(".um-modal").find("#um_upload_single").attr("data-ratio")).split(":")[0]),t.length&&""!=t.attr("src")&&(e=jQuery(window).height()-(jQuery(".um-modal-footer a").height()+20)-50-jQuery(".um-modal-header:visible").height(),t.css({height:"auto"}),i.css({height:"auto"}),jQuery(window).height()<=400?(i.css({height:e+"px","max-height":e+"px"}),t.css({height:"auto"})):(t.css({height:"auto","max-height":e+"px"}),i.css({height:t.height(),"max-height":e+"px"})),"square"==d?a={minWidth:o,minHeight:r,dragCrop:!1,aspectRatio:1,zoomable:!1,rotatable:!1,dashed:!1,done:function(e){t.parent().attr("data-coord",Math.round(e.x)+","+Math.round(e.y)+","+Math.round(e.width)+","+Math.round(e.height))}}:"cover"==d?(0<Math.round(o/s)&&(r=Math.round(o/s)),a={minWidth:o,minHeight:r,dragCrop:!1,aspectRatio:s,zoomable:!1,rotatable:!1,dashed:!1,done:function(e){t.parent().attr("data-coord",Math.round(e.x)+","+Math.round(e.y)+","+Math.round(e.width)+","+Math.round(e.height))}}):"user"==d&&(a={minWidth:o,minHeight:r,dragCrop:!0,aspectRatio:"auto",zoomable:!1,rotatable:!1,dashed:!1,done:function(e){t.parent().attr("data-coord",Math.round(e.x)+","+Math.round(e.y)+","+Math.round(e.width)+","+Math.round(e.height))}}),0!=d&&(t.cropper(a),jQuery(".um-single-image-preview img.cropper-hidden").cropper("destroy"),jQuery(".um-single-image-preview img.lazyloaded").addClass("cropper-hidden"),jQuery(".um-single-image-preview img.lazyloaded").removeClass("lazyloaded"),jQuery(".um-single-image-preview .cropper-container").append('<div class="um-clear"></div>')))}function um_modal_open(e){let i=jQuery(e),a=null,t="normal",d=!1,o=!1;i.data("modal")&&(a=i.data("modal")),i.data("modal-size")&&(t=i.data("modal-size")),i.data("dynamic-content")&&(d=!0),jQuery(document.body).is(".wp-admin")&&(o=!0);let r=jQuery("#"+a);if(r.length<1&&(r=jQuery(a)),0<r.length&&i.data("modal-copy")){let e,a,t=i.parents(".um-field").find(".um-modal-hidden-content");0<t.length&&r.html(t),i.parents("[data-user_id]").length?a=i.parents("[data-user_id]").data("user_id"):0<jQuery('input[type="hidden"][name="user_id"]').length&&(a=jQuery('input[type="hidden"][name="user_id"]').val()),a&&r.attr("data-user_id",a),i.parents("[data-ratio]").length&&(e=i.parents("[data-ratio]").data("ratio"),r.attr("data-ratio",e))}0<r.length&&i.data("back")&&r.find("a.um-admin-modal-back").attr("data-modal",i.data("back"));var s=um_modal_new(a,t,d,null,o),e=wp.hooks.applyFilters("um-modal-ajax",null,s,i,i.data());return wp.hooks.doAction("um-modal-opened",e,s,i,i.data()),s}function um_modal_new(e,a,t,i,d){UM.modal.hide(),UM.dropdown.hideAll(),jQuery(".tipsy").hide();let o=jQuery("#"+e),r,s={id:e};return r=i?'<img src="'+i+'" />':(o.find(".um-modal-body").length?o.find(".um-modal-body"):o.clone()).children(),a&&(s.class=a),d&&(s.class+=" um-admin-modal"),!0!==t||i||(s.class+=" loading",s.type="popup"),i&&(s.class+=" is-photo",s.type="photo"),o.is("[data-user_id]")?s.attr["data-user_id"]=o.attr("data-user_id"):o.find("[data-user_id]").length&&(s.attr["data-user_id"]=o.find("[data-user_id]").attr("data-user_id")),o.find(".um-modal-header").length&&(s.header=o.find(".um-modal-header").text().trim()),UM.modal.addModal(r,s)}function um_remove_modal(){UM.modal.clear()}function um_modal_responsive(e){UM.modal.responsive(e)}function um_new_modal(e,a,t,i){um_modal_new(e,a,t,i)}function um_modal_size(e){}function um_modal_add_attr(e,a){}function prepare_Modal(){UM.modal.addModal("loading",{type:"popup"}),UM.modal.responsive()}function show_Modal(e){UM.modal.setContent(e)}function responsive_Modal(){UM.modal.responsive()}function remove_Modal(){UM.modal.clear()}"object"!=typeof window.UM&&(window.UM={}),UM.dropdown={hide:function(e){e=jQuery(e);e.parents("div").find("a").removeClass("active"),e.hide()},hideAll:function(){var e=jQuery(".um-dropdown");e.parents("div").find("a").removeClass("active"),e.hide()},setPosition:function(e){var a=jQuery(e),t=200,i=jQuery("html").attr("dir"),d=a.attr("data-element"),o=a.attr("data-position"),e=a.attr("data-trigger"),r=d&&jQuery(d).length?jQuery(d):a.siblings("a").length?a.siblings("a").first():a.parent();r.addClass("um-trigger-menu-on-"+e);var s,n=0,u=(r.outerWidth()-t)/2,l=r.outerHeight(),e=r.offset();switch(r.is(".um-profile-photo")&&(s=r.find(".um-profile-photo-img"),l=r.closest("div.uimob500").length?r.outerHeight()-s.outerHeight()/4:(u=(s.outerWidth()-t)/2,s.outerHeight()/4)),r.is(".um-cover")&&(s=r.find(".um-cover-e"),l=r.closest("div.uimob500").length?(u=(s.outerWidth()-t)/2,s.outerHeight()/2+24):(u=(s.outerWidth()-t)/2,s.outerHeight()/2+46)),"lc"===o&&"rtl"===i&&(o="rc"),r.outerWidth()<t&&("rtl"===i&&e.left<100?o="rc":"rtl"!==i&&window.innerWidth-e.left-r.outerWidth()<100&&(o="lc")),o){case"lc":n=r.width()+17,a.css({top:0,width:t,left:"auto",right:n+"px","text-align":"center"}),a.find(".um-dropdown-arr").css({top:"4px",left:"auto",right:"-17px"}).find("i").removeClass().addClass("um-icon-arrow-right-b");break;case"rc":n=r.width()+25,a.css({top:0,width:t,left:n+"px",right:"auto","text-align":"center"}),a.find(".um-dropdown-arr").css({top:"4px",left:"-17px",right:"auto"}).find("i").removeClass().addClass("um-icon-arrow-left-b");break;case"bc":default:var m=a.data("top-offset");void 0!==m&&(l+=m),a.css({top:l+6,width:t,left:u,right:"auto","text-align":"center"}),a.find(".um-dropdown-arr").css({top:"-17px",left:a.width()/2-12,right:"auto"}).find("i").removeClass().addClass("um-icon-arrow-up-b")}},show:function(e){e=jQuery(e);UM.dropdown.hideAll(),UM.dropdown.setPosition(e),e.show()}},wp.hooks.addAction("um-modal-before-add","ultimatemember",function(e,a){var t=e.find(".um-single-image-upload");t.length&&initImageUpload_UM(t);e=e.find(".um-single-file-upload");e.length&&initFileUpload_UM(e)},10),wp.hooks.addFilter("um-modal-responsive","ultimatemember",function(e,a){return a.find(".um-single-image-preview img").length&&initCrop_UM(),e},10),jQuery(function(){jQuery(document.body).on("click",'[data-modal^="um_"], [data-modal^="UM_"]',function(e){return e.preventDefault(),!jQuery(e.currentTarget).is(".um-admin-modal-back")&&void um_modal_open(e.currentTarget)}).on("click",'[data-action="um_remove_modal"]',function(e){e.preventDefault(),UM.modal.close()}),jQuery(document).on("click",".um-modal .um-single-file-preview a.cancel",function(e){e.preventDefault();var a=jQuery(this).parents(".um-modal-body"),t=jQuery(this).parents(".um-modal-body").find(".um-single-fileinfo a").attr("href"),e=a.find(".um-single-file-upload").data("set_mode");return jQuery.ajax({url:wp.ajax.settings.url,type:"post",data:{action:"um_remove_file",src:t,mode:e,nonce:um_scripts.nonce},success:function(){a.find(".um-single-file-preview").hide(),a.find(".ajax-upload-dragdrop").show(),a.find(".um-modal-btn.um-finish-upload").addClass("disabled"),UM.modal.responsive()}}),!1}),jQuery(document).on("click",".um-modal .um-single-image-preview a.cancel",function(e){e.preventDefault();var a=jQuery(this).parents(".um-modal-body"),t=jQuery(this).parents(".um-modal-body").find(".um-single-image-preview img").attr("src"),e=a.find(".um-single-image-upload").data("set_mode");return jQuery.ajax({url:wp.ajax.settings.url,type:"post",data:{action:"um_remove_file",src:t,mode:e,nonce:um_scripts.nonce},success:function(){jQuery("img.cropper-hidden").cropper("destroy"),a.find(".um-single-image-preview img").attr("src",""),a.find(".um-single-image-preview").hide(),a.find(".ajax-upload-dragdrop").show(),a.find(".um-modal-btn.um-finish-upload").addClass("disabled"),UM.modal.responsive()}}),!1}),jQuery(document).on("click",".um-finish-upload.file:not(.disabled)",function(){var e=jQuery(this).attr("data-key"),a=jQuery(this).parents(".um-modal-body").find(".um-single-file-preview").html();UM.modal.clear(),jQuery(".um-single-file-preview[data-key="+e+"]").fadeIn().html(a);a=jQuery(".um-field[data-key="+e+"]").find(".um-single-fileinfo a").data("file");jQuery(".um-single-file-preview[data-key="+e+"]").parents(".um-field").find(".um-btn-auto-width").html(jQuery(this).attr("data-change")),jQuery(".um-single-file-preview[data-key="+e+"]").parents(".um-field").find('input[type="hidden"]').val(a)}),jQuery(document).on("click",".um-finish-upload.image:not(.disabled)",function(){var a=jQuery(this),t=jQuery(this).attr("data-key"),e=jQuery(this).parents(".um-modal-body").find(".um-single-image-preview"),i=e.find("img").attr("src"),o=e.attr("data-coord"),r=e.find("img").data("file"),s=0;jQuery(this).parents("#um_upload_single").data("user_id")&&(s=jQuery(this).parents("#um_upload_single").data("user_id"));var n=0,u="";1===jQuery('div.um-field-image[data-key="'+t+'"]').length&&(n=(e=jQuery('div.um-field-image[data-key="'+t+'"]').closest(".um-form")).find('input[name="form_id"]').val(),u=e.attr("data-mode")),o?(jQuery(this).html(jQuery(this).attr("data-processing")).addClass("disabled"),jQuery.ajax({url:wp.ajax.settings.url,type:"POST",dataType:"json",data:{action:"um_resize_image",src:i,coord:o,user_id:s,key:t,set_id:n,set_mode:u,nonce:um_scripts.nonce},success:function(e){e.success&&(d=new Date,"profile_photo"===t?jQuery(".um-profile-photo-img img").attr("src",e.data.image.source_url+"?"+d.getTime()):"cover_photo"===t&&(jQuery(".um-cover-e").empty().html('<img src="'+e.data.image.source_url+"?"+d.getTime()+'" alt="" />'),jQuery(".um").hasClass("um-editing")&&jQuery(".um-cover-overlay").show()),jQuery(".um-single-image-preview[data-key="+t+"]").fadeIn().find("img").attr("src",e.data.image.source_url+"?"+d.getTime()),UM.modal.clear(),jQuery("img.cropper-invisible").remove(),jQuery(".um-single-image-preview[data-key="+t+"]").parents(".um-field").find(".um-btn-auto-width").html(a.attr("data-change")),jQuery(".um-single-image-preview[data-key="+t+"]").parents(".um-field").find('input[type="hidden"]').val(e.data.image.filename))}})):(d=new Date,jQuery(".um-single-image-preview[data-key="+t+"]").fadeIn().find("img").attr("src",i+"?"+d.getTime()),UM.modal.clear(),jQuery(".um-single-image-preview[data-key="+t+"]").parents(".um-field").find(".um-btn-auto-width").html(a.attr("data-change")),jQuery(".um-single-image-preview[data-key="+t+"]").parents(".um-field").find("input[type=hidden]").val(r))}),jQuery(".um-search form *").on("keypress",function(e){if(13==e.which)return jQuery(".um-search form").trigger("submit"),!1}),2==jQuery("input[data-key=user_password],input[data-key=confirm_user_password]").length&&UM_check_password_matched()});