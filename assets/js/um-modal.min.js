jQuery(document).ready(function(){jQuery(document).on("click",".um-popup-overlay",function(){remove_Modal()}),jQuery(document).on("click",'.um-modal-overlay, a[data-action="um_remove_modal"]',function(){um_remove_modal()}),jQuery(document).on("click",'a[data-modal^="um_"], span[data-modal^="um_"], .um-modal:not(:has(.um-form)) a',function(e){return e.preventDefault(),!1}),jQuery(document).on("click",".um-finish-upload.file:not(.disabled)",function(){var e=jQuery(this).attr("data-key"),a=jQuery(this).parents(".um-modal-body").find(".um-single-file-preview").html();um_remove_modal(),jQuery(".um-single-file-preview[data-key="+e+"]").fadeIn().html(a);a=jQuery(".um-field[data-key="+e+"]").find(".um-single-fileinfo a").data("file");jQuery(".um-single-file-preview[data-key="+e+"]").parents(".um-field").find(".um-btn-auto-width").html(jQuery(this).attr("data-change")),jQuery(".um-single-file-preview[data-key="+e+"]").parents(".um-field").find('input[type="hidden"]').val(a)}),jQuery(document).on("click",".um-finish-upload.image:not(.disabled)",function(){var t,i=jQuery(this),r=jQuery(this).attr("data-key"),e=jQuery(this).parents(".um-modal-body").find(".um-single-image-preview"),a=e.find("img").attr("src"),d=e.find("img").data("file"),u=0;jQuery(this).parents("#um_upload_single").data("user_id")&&(u=jQuery(this).parents("#um_upload_single").data("user_id"));var n,m=0,o="",s=jQuery('div.um-field-image[data-key="'+r+'"]');1===s.length?(m=(e=s.closest(".um-form")).data("form_id")||e.find('input[name="form_id"]').val(),o=e.data("mode"),n=s.closest(".um.um-profile"),0<jQuery(".cropper-hidden").length&&UM.frontend.cropper.obj?(s=UM.frontend.cropper.obj.getData(),s=Math.round(s.x)+","+Math.round(s.y)+","+Math.round(s.width)+","+Math.round(s.height),jQuery(this).html(jQuery(this).attr("data-processing")).addClass("disabled"),jQuery.ajax({url:wp.ajax.settings.url,type:"POST",dataType:"json",data:{action:"um_resize_image",src:a,coord:s,user_id:u,key:r,set_id:m,set_mode:o,nonce:um_scripts.nonce},success:function(e){var a;e.success&&(t=new Date,"profile_photo"===r?(n.find(".um-profile-photo-img img").attr("src",e.data.image.source_url+"?"+t.getTime()),n.is(".um-viewing")&&n.find(".um-profile-photo-overlay").hide()):"cover_photo"===r&&((a=n.find(".um-cover-e")).find("img").remove(),a.prepend('<img src="'+e.data.image.source_url+"?"+t.getTime()+'" alt="" />'),a=a.find(".um-cover-overlay"),n.find("div.um-cover a.um-manual-trigger, .um-cover-overlay-t").html(a.data("text-change")),n.is(".um-viewing")&&a.hide()),jQuery(".um-single-image-preview[data-key="+r+"]").fadeIn().find("img").attr("src",e.data.image.source_url+"?"+t.getTime()),um_remove_modal(),jQuery("img.cropper-invisible").remove(),jQuery(".um-single-image-preview[data-key="+r+"]").parents(".um-field").find(".um-btn-auto-width").html(i.attr("data-change")),jQuery(".um-single-image-preview[data-key="+r+"]").parents(".um-field").find('input[type="hidden"]').val(e.data.image.filename))}})):(t=new Date,jQuery(".um-single-image-preview[data-key="+r+"]").fadeIn().find("img").attr("src",a+"?"+t.getTime()),um_remove_modal(),jQuery(".um-single-image-preview[data-key="+r+"]").parents(".um-field").find(".um-btn-auto-width").html(i.attr("data-change")),jQuery(".um-single-image-preview[data-key="+r+"]").parents(".um-field").find("input[type=hidden]").val(d))):console.warn("UM Warning: No field associated with image uploader.")}),jQuery(document.body).on("click",'a[data-modal^="um_"], span[data-modal^="um_"]',function(e){var a=jQuery(this).attr("data-modal"),t="normal";jQuery(this).data("modal-size")&&(t=jQuery(this).data("modal-size")),jQuery(this).data("modal-copy")&&(jQuery("#"+a).html(jQuery(this).parents(".um-field").find(".um-modal-hidden-content").html()),jQuery(this).parents(".um-profile-photo").attr("data-user_id")&&jQuery("#"+a).attr("data-user_id",jQuery(this).parents(".um-profile-photo").attr("data-user_id")),jQuery(this).parents(".um-cover").attr("data-ratio")&&jQuery("#"+a).attr("data-ratio",jQuery(this).parents(".um-cover").attr("data-ratio")),jQuery(this).parents(".um-cover").attr("data-user_id")&&jQuery("#"+a).attr("data-user_id",jQuery(this).parents(".um-cover").attr("data-user_id")),0<jQuery('input[type="hidden"][name="user_id"]').length&&jQuery("#"+a).attr("data-user_id",jQuery('input[type="hidden"][name="user_id"]').val())),um_new_modal(a,t)})});