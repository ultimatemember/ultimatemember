"object"!=typeof window.UM&&(window.UM={}),"object"!=typeof UM.frontend&&(UM.frontend={}),UM.frontend={cropper:{obj:null,init:function(){let o=jQuery(".um-modal .um-profile-photo-crop-wrapper img").first();if(o.length&&""!==o.attr("src")){UM.frontend.cropper.obj&&UM.frontend.cropper.destroy();var r=jQuery(".um-modal .um-profile-photo-crop-wrapper"),t=o.parent().data("crop"),n=o.parent().data("min_width"),i=o.parent().data("min_height"),a=o.parent().data("ratio"),l=jQuery(".um-modal").find("#um_upload_single").data("ratio"),d=(l&&(a=l.split(":")[0]),jQuery(window).height()-(jQuery(".um-modal-buttons-wrapper").height()+20)-80-jQuery(".um-modal-header:visible").height()),l=new Image;l.src=o.attr("src"),new ResizeObserver((e,t)=>{t.disconnect(),o.css({height:"auto"}),r.css({height:"auto"}),r.css({height:d+"px","max-height":d+"px"}),o.css({height:"auto"})}).observe(l);let e;"square"===t?e={minWidth:n,minHeight:i,dragCrop:!1,aspectRatio:1,zoomable:!1,rotatable:!1,dashed:!1}:"cover"===t?(0<Math.round(n/a)&&(i=Math.round(n/a)),e={minWidth:n,minHeight:i,dragCrop:!1,aspectRatio:a,zoomable:!1,rotatable:!1,dashed:!1}):"user"===t&&(e={minWidth:n,minHeight:i,dragCrop:!0,aspectRatio:"auto",zoomable:!1,rotatable:!1,dashed:!1}),e&&(UM.frontend.cropper.obj=new Cropper(o[0],e))}},destroy:function(){0<jQuery(".cropper-container").length&&UM.frontend.cropper.obj&&(UM.frontend.cropper.obj.destroy(),UM.frontend.cropper.obj=null)}},dropdown:{init:function(){var e=jQuery(".um-dropdown");e.length&&e.um_dropdownMenu()}},toggleElements:{init:function(){jQuery(document.body).on("click","[data-um-toggle]",function(e){e.preventDefault();let o=jQuery(this);if(!o.data("um-toggle-ignore")){o.data("um-toggle-ignore",!0);let t=jQuery(o.data("um-toggle"));(t=wp.hooks.applyFilters("um_toggle_block",t,o)).toggleClass("um-toggle-block-collapsed"),o.toggleClass("um-toggle-button-active");e=function(e){t.find(".um-toggle-block-inner").toggleClass("um-visible"),e||o.data("um-toggle-ignore",!1)};return t.hasClass("um-toggle-block-collapsed")?(e(!0),setTimeout(function(){o.data("um-toggle-ignore",!1)},500)):setTimeout(e,500),!1}})}},progressBar:{init:function(){jQuery(".um-progress-bar").each(function(){jQuery(this).find(".um-progress-bar-inner").css("width",jQuery(this).data("value")+"%")})},set:function(e,t){e.data("value",t).attr("title",t+"%"),e.find(".um-progress-bar-inner").css("width",t+"%").attr("title",t+"%"),e.siblings(".um-progress-bar-label").text(t+"%")}},responsive:{resolutions:{xs:320,s:576,m:768,l:992,xl:1024},getSize:function(e){var t,o=UM.frontend.responsive;for(t in o.resolutions)if(o.resolutions.hasOwnProperty(t)&&o.resolutions[t]===e)return t;return!1},setClass:function(){let n=UM.frontend.responsive,i=Object.values(n.resolutions);i.sort(function(e,t){return t-e}),jQuery(".um").each(function(){let r=jQuery(this);if(!r.hasClass("um-not-responsive")){let o=r.outerWidth();jQuery.each(i,function(e){e=n.getSize(i[e]);r.removeClass("um-ui-"+e)}),jQuery.each(i,function(e){var t=n.getSize(i[e]);return o>=i[e]||"xs"===t&&o<=i[e]?(r.addClass("um-ui-"+t),!1):void 0})}})}},uploaders:[],uploader:{init:function(){plupload.addFileFilter("um_files_limit",function(e,t,o){var r=this,n=wp.hooks.applyFilters("um_uploader_files_limit",r.files.length,r),t=(e&&e<=n?(this.trigger("Error",{code:-801,message:wp.i18n.__("Files limit error.","ultimate-member"),file:t}),o(!1)):o(!0),r.getOption("browse_button")[0]);let i=t.parentNode;e&&e-1<=n?(t.setAttribute("disabled","disabled"),(o=r.getOption("drop_element")[0])&&(i=o.parentNode,o.classList.add("um-dropzone-disabled"),e=o.querySelector(".um-upload-link"))&&e.classList.add("um-link-disabled"),wp.hooks.doAction("um_uploader_trigger_files_limit_true",i)):(t.removeAttribute("disabled"),r.getOption("drop_element")&&(n=r.getOption("drop_element")[0],i=n.parentNode,n.classList.remove("um-dropzone-disabled"),o=n.querySelector(".um-upload-link"))&&o.classList.remove("um-link-disabled"),wp.hooks.doAction("um_uploader_trigger_files_limit_false",i))}),jQuery(".um-uploader-button").each(function(){let l=jQuery(this),d=l.parents(".um-uploader");if(!d.data("plupload")){var t=d.find(".um-uploader-dropzone");let a=d.find(".um-uploader-filelist");var o=l.data("mime-types"),r=parseInt(l.data("max-size")),n=parseInt(l.data("max-files")),i=l.data("multiple"),s=l.data("handler"),u=l.data("nonce"),o={prevent_duplicates:!0,mime_types:o};0!==r&&(o.max_file_size=plupload.formatSize(r)),0!==n&&(o.um_files_limit=n);let e={browse_button:l.get(0),url:wp.ajax.settings.url+"?action=um_upload&handler="+s+"&nonce="+u,chunk_size:"1024kb",max_retries:1,multi_selection:i,filters:o,init:{Error:function(e,o){if(wp.hooks.doAction("um_uploader_error",d,e,o),void 0!==o.file&&a.length){a.umShow();let t=a.find("#"+o.file.id);if(t.length)t.addClass("um-upload-failed");else{var r=d.find(".um-uploader-file-placeholder").clone().addClass("um-uploader-file um-upload-failed").removeClass("um-uploader-file-placeholder um-display-none").attr("id",o.file.id);a.append(r),(t=a.find("#"+o.file.id)).find(".um-uploader-file-name").text(o.file.name);let e=o.file.name.split(".").pop();""===o.file.type&&(e="file"),t.find(".um-file-extension-text").text(e)}t.find(".um-supporting-text").html(o.message),t.find(".um-progress-bar-wrapper").remove(),wp.hooks.doAction("um_uploader_after_file_row_error",d,e,o,t)}},FileFiltered:function(o,r){var t=wp.hooks.applyFilters("um_uploader_file_filtered",null,l,o,r);if(null===t&&a.length){a.umShow(),o.getOption("multi_selection")||a.find(".um-uploader-file").each(function(e,t){o.removeFile(t.id)});t=a.find("#"+r.id);if(!t.length){var n=d.find(".um-uploader-file-placeholder").clone().addClass("um-uploader-file").removeClass("um-uploader-file-placeholder um-display-none").attr("id",r.id),i=[".um-uploaded-value",".um-uploaded-value-hash"];for(let t=0;t<i.length;t++){let e=n.find(i[t]).attr("name");e=e.replace("{{{file_id}}}",r.id),n.find(i[t]).prop("disabled",!1).attr("name",e)}a.append(n),(t=a.find("#"+r.id)).find(".um-uploader-file-name").text(r.name);let e=r.name.split(".").pop();""===r.type&&(e="file"),t.find(".um-file-extension-text").text(e),t.find(".um-supporting-text").text(plupload.formatSize(r.size)),a.hasClass("um-uploader-filelist-sortable")&&a.sortable()}}},FilesAdded:function(e,t){wp.hooks.doAction("um_uploader_files_added",d,e,t),t.length&&e.start()},FilesRemoved:function(e,t){t.length&&jQuery.each(t,function(e,t){jQuery("#"+t.id).remove()}),wp.hooks.doAction("um_uploader_files_removed",d,e,t)},FileUploaded:function(e,t,o){var r,n;200===o.status&&o.response?(n=JSON.parse(o.response))?n.info&&0===n.OK?null===wp.hooks.applyFilters("um_uploader_file_upload_failed",null,l,e,t,n)&&a.length&&((r=a.find("#"+t.id)).find(".um-supporting-text").text(n.info),r.addClass("um-upload-failed"),r.find(".um-progress-bar-wrapper").remove()):n.data&&null===wp.hooks.applyFilters("um_uploader_file_uploaded",null,l,e,t,n)&&a.length&&((r=a.find("#"+t.id)).data("filename",n.data[0].name_saved).data("nonce",n.data[0].delete_nonce),r.find(".um-progress-bar-wrapper").remove(),r.addClass("um-upload-completed")):null===wp.hooks.applyFilters("um_uploader_file_upload_failed",null,l,e,t,n)&&a.length&&((r=a.find("#"+t.id)).find(".um-supporting-text").text(wp.i18n.__("File was not loaded. Wrong file upload server response.","ultimate-member")),r.addClass("um-upload-failed"),r.find(".um-progress-bar-wrapper").remove()):null===wp.hooks.applyFilters("um_uploader_file_upload_failed",null,l,e,t,null)&&a.length&&((n=a.find("#"+t.id)).find(".um-supporting-text").text(wp.i18n.__("File was not loaded, Status Code ","ultimate-member")+o.status),n.addClass("um-upload-failed"),n.find(".um-progress-bar-wrapper").remove())},PostInit:function(e){},UploadProgress:function(e,t){wp.hooks.doAction("um_uploader_upload_progress",d,e,t);e=jQuery("#"+t.id).find(".um-progress-bar");e.length&&UM.frontend.progressBar.set(e,t.percent)},UploadComplete:function(e,t){wp.hooks.doAction("um_uploader_upload_complete",d,e,t)}}};t.length&&(e.drop_element=t.get(0)),(e=wp.hooks.applyFilters("um_uploader_data",e,s,l)).url&&(r=new plupload.Uploader(e),UM.frontend.uploaders[r.id]=r,d.data("plupload",r.id),r.init(),a.length)&&a.hasClass("um-uploader-filelist-sortable")&&null===wp.hooks.applyFilters("um_uploader_init_sortable_filelist",null,a,s)&&a.sortable()}})},initActions:function(){jQuery(document.body).on("dragover",".um-uploader-dropzone",function(e){let t=e.target;e.target.classList.contains("um-uploader-dropzone")||(t=t.closest(".um-uploader-dropzone")),jQuery(t).attr("drop-active",!0),e.preventDefault()}),jQuery(document.body).on("dragleave",".um-uploader-dropzone",function(e){e.preventDefault();let t=e.target;e.target.classList.contains("um-uploader-dropzone")||(t=t.closest(".um-uploader-dropzone")),jQuery(t).removeAttr("drop-active")}),jQuery(document.body).on("drop",".um-uploader-dropzone",function(e){e.preventDefault();let t=e.target;e.target.classList.contains("um-uploader-dropzone")||(t=t.closest(".um-uploader-dropzone")),jQuery(t).removeAttr("drop-active")}),jQuery(document.body).on("click",".um-upload-link:not(.um-link-disabled)",function(e){e.preventDefault(),jQuery(this).parents(".um-uploader").find(".um-uploader-button").trigger("click")}),jQuery(document.body).on("click",".um-uploader-file-remove",function(){if(!confirm(wp.i18n.__("Are you sure that you want to delete this file?","ultimate-member")))return!1;function e(){var e=n.attr("id"),t=UM.frontend.uploaders[r.data("plupload")],o=(wp.hooks.doAction("um_uploader_file_row_removed",n,e,t),t.getOption("filters").um_files_limit);t.removeFile(e),n.remove(),o&&t.files.length<o&&(t.getOption("browse_button")[0].removeAttribute("disabled"),o=t.getOption("drop_element")[0])&&(o.classList.remove("um-dropzone-disabled"),o=o.querySelector(".um-upload-link"))&&o.classList.remove("um-link-disabled"),wp.hooks.doAction("um_uploader_after_file_row_removed",r,e,t)}let r=jQuery(this).parents(".um-uploader"),n=jQuery(this).parents(".um-uploader-file");var t,o;n.hasClass("um-upload-failed")?e():(t=n.data("filename"),o=n.data("nonce"),wp.ajax.send("um_delete_temp_file",{data:{name:t,nonce:o},success:function(){e()},error:function(e){alert(e),console.log(e)}}))})}},url:{parseData:function(){let t={};let o=window.location.search.substring(1).split("&");return jQuery.each(o,function(e){e=o[e].split("=");t[e[0]]=e[1]}),t},setURLSearchParam:function(e,t){var o=new URL(window.location.href);o.searchParams.set(e,t),window.history.pushState({path:o.href},"",o.href)},deleteURLSearchParam:function(e,t=!1){var o=new URL(window.location.href);o.searchParams.delete(e),t?window.location.assign(o):window.history.pushState({path:o.href},"",o.href)}},choices:{optionsCache:{},init:function(){let n=this;n.choicesInstances={},jQuery(".js-choice").each(function(){var e=jQuery(this)[0];let t=null,o={};jQuery(this).attr("multiple")?(jQuery(this).data("min_selections"),r=jQuery(this).data("max_selections"),o={removeItemButton:!0},r&&(o.maxItemCount=r)):jQuery(this).hasClass("um-no-search")&&(o={searchEnabled:!1}),t=new Choices(jQuery(this)[0],o),n.choicesInstances[e.id]=t;var r=jQuery(this).closest("form")[0];r&&r.addEventListener("reset",()=>{t.destroy(),t.init()})})},updateOptions:function(e,t,o=!1){jQuery("#"+e)&&this.choicesInstances[e]&&(e=this.choicesInstances[e],!0===o||(e.clearStore(),e.clearChoices(),e.removeActiveItems(),e.enable(),0===t.length)?e.removeActiveItems():e.setChoices(t,"id","label",!0))},populateChildOptions:function(e,t,o){var r=jQuery("#"+e),n=r.parents(".um-directory"),i=r.attr("name"),a=(r.find('option[value!=""]').remove(),r.hasClass("um-child-option-disabled")||r.prop("disabled",!1),[]),l="";if(r.attr("data-um-original-value")&&(l=r.attr("data-um-original-value")),void 0!==t&&t.post.members_directory,void 0!==t&&t.items&&jQuery.each(t.items,function(e,t){0!==parseInt(e)&&a.push({id:e,text:t,selected:t===l})}),UM.frontend.choices.updateOptions(e,a),void 0!==t&&"yes"===t.post.members_directory){r.find("option").each(function(){""!==jQuery(this).html()&&jQuery(this).data("value_label",jQuery(this).html()).attr("data-value_label",jQuery(this).html())});n=UM.frontend.directories.getHash(n);let t=UM.frontend.directories.list[n].getDataFromURL("filter_"+i);void 0!==t&&(t=t.split("||"),a.forEach(e=>{t.includes(e.id)&&(e.selected=!0)}),UM.frontend.choices.updateOptions(e,a))}void 0!==t&&"yes"!==t.post.members_directory&&(void 0===t.field.default||r.data("um-original-value")?""!==r.data("um-original-value")&&r.val(r.data("um-original-value")).trigger("change"):r.val(t.field.default).trigger("change"),0==t.field.editable)&&(r.addClass("um-child-option-disabled"),r.attr("disabled","disabled"))}},slider:{controlFromSlider:function(e,t){var[o,r]=UM.frontend.slider.getParsed(e,t);UM.frontend.slider.fillSlider(e,t,um_frontend_common_variables.colors.gray200,um_frontend_common_variables.colors.primary600bg,t),r<o&&(e.value=r)},controlToSlider:function(e,t){var[o,r]=UM.frontend.slider.getParsed(e,t);UM.frontend.slider.fillSlider(e,t,um_frontend_common_variables.colors.gray200,um_frontend_common_variables.colors.primary600bg,t),UM.frontend.slider.setToggleAccessible(t),t.value=o<=r?r:o},replacePlaceholder:function(o,r,n){o=o.closest(".um-range-container").querySelector(".um-range-placeholder");if(o&&o.dataset.placeholderS&&o.dataset.placeholderP&&o.dataset.label)if(r===n)o.innerHTML=o.dataset.placeholderS.replace("{{{value}}}",r).replace("{{{label}}}",o.dataset.label);else{let e=r,t=n;e>t?e=t:t<e&&(t=e),t===e?o.innerHTML=o.dataset.placeholderS.replace("{{{value}}}",e).replace("{{{label}}}",o.dataset.label):o.innerHTML=o.dataset.placeholderP.replace("{{{value_from}}}",e).replace("{{{value_to}}}",t).replace("{{{label}}}",o.dataset.label)}},getParsed:function(e,t){var o=parseInt(e.value,10),t=parseInt(t.value,10);return UM.frontend.slider.replacePlaceholder(e,o,t),[o,t]},fillSlider:function(e,t,o,r,n){var i=t.max-t.min,a=e.value-t.min,t=t.value-t.min,e=23/(e.offsetWidth/100);n.style.background=0==a?`linear-gradient(
				  to right,
				  transparent 0%,
				  transparent ${e}%,
				  ${o} ${a/i*100}%,
				  ${r} ${a/i*100}%,
				  ${r} ${t/i*100}%,
				  ${o} ${t/i*100}%,
				  ${o} 100%)`:`linear-gradient(
				  to right,
				  ${o} 0%,
				  ${o} ${a/i*100}%,
				  ${r} ${a/i*100}%,
				  ${r} ${t/i*100}%,
				  ${o} ${t/i*100}%,
				  ${o} 100%)`},setToggleAccessible:function(e){Number(e.value)<=e.min?e.style.zIndex=2:e.style.zIndex=0},init:function(){jQuery(".um-range-container").each(function(){let e=jQuery(this).find(".um-from-slider")[0],t=jQuery(this).find(".um-to-slider")[0];var o=jQuery(this).find(".um-sliders-control")[0];e&&t&&(UM.frontend.slider.fillSlider(e,t,um_frontend_common_variables.colors.gray200,um_frontend_common_variables.colors.primary600bg,t),UM.frontend.slider.setToggleAccessible(t),e.oninput=()=>UM.frontend.slider.controlFromSlider(e,t),t.oninput=()=>UM.frontend.slider.controlToSlider(e,t)),o&&(o.addEventListener("mouseover",function(){UM.frontend.slider.fillSlider(e,t,um_frontend_common_variables.colors.gray300,um_frontend_common_variables.colors.primary700bg,t)}),o.addEventListener("mouseout",function(){UM.frontend.slider.fillSlider(e,t,um_frontend_common_variables.colors.gray200,um_frontend_common_variables.colors.primary600bg,t)}),o=o.closest("form"))&&o.addEventListener("reset",function(){setTimeout(function(){UM.frontend.slider.fillSlider(e,t,um_frontend_common_variables.colors.gray200,um_frontend_common_variables.colors.primary600bg,t),UM.frontend.slider.replacePlaceholder(e,e.value,t.value)},1)})})}},image:{lazyload:{init:function(){let o=document.querySelectorAll(".um-image-lazyload-wrapper:not(.um-inited)");for(let t=0;t<o.length;t++){o[t].classList.add("um-inited");var e=o[t].querySelector(".um-image-lazyload");e.complete?o[t].classList.add("um-loaded"):e.addEventListener("load",e=>{o[t].classList.add("um-loaded")},!1)}}}}},wp.hooks.addAction("um_remove_modal","um_common_frontend",function(){UM.frontend.cropper.destroy()}),wp.hooks.addAction("um_after_removing_preview","um_common_frontend",function(){UM.frontend.cropper.destroy()}),wp.hooks.addAction("um_window_resize","um_common_frontend",function(){UM.frontend.cropper.destroy()}),wp.hooks.addAction("um_member_directory_loaded","um_common_frontend",function(){UM.frontend.dropdown.init()}),wp.hooks.addAction("um_member_directory_build_template","um_common_frontend",function(){UM.frontend.dropdown.init()}),jQuery(document).ready(function(t){UM.frontend.dropdown.init(),UM.frontend.toggleElements.init(),UM.frontend.progressBar.init(),UM.frontend.uploader.init(),UM.frontend.uploader.initActions(),UM.frontend.slider.init(),UM.frontend.choices.init(),UM.frontend.image.lazyload.init(),t(window).on("resize",function(){UM.frontend.responsive.setClass()}),t(document.body).on("click",".um-alert-dismiss",function(e){e.preventDefault(),t(this).parents(".um-alert").umHide()}),jQuery("select[data-um-parent]").each(function(){let r=jQuery(this),n=r.data("um-parent"),i=r.data("um-ajax-source"),a=r.data("nonce"),l="";jQuery(document.body).on("change",'select[name="'+n+'"]',function(){var e=jQuery(this),t=e.closest("form").find('input[type="hidden"][name="form_id"]').val();let o;if(r.parents(".um-directory").length?(l="yes",o=[],jQuery(this).find("option:selected").each(function(){o.push(jQuery(this).val())}),void 0===o&&(o="")):o=e.val(),void 0!==o&&""!==o&&"object"!=typeof UM.frontend.choices.optionsCache[o]){if(void 0!==r.um_wait&&!1!==r.um_wait)return;r.um_wait=!0,wp.ajax.send("um_select_options",{data:{action:"um_select_options",parent_option_name:n,parent_option:o,child_callback:i,child_name:r.attr("name"),members_directory:l,form_id:t,nonce:a},success:function(e){"success"===e.status&&""!==o&&(UM.frontend.choices.optionsCache[o]=e,UM.frontend.choices.populateChildOptions(r.attr("id"),e,o)),void 0!==e.debug&&console.log(e),r.um_wait=!1},error:function(e){console.log(e),r.um_wait=!1}})}else setTimeout(UM.frontend.choices.populateChildOptions,10,r.attr("id"),UM.frontend.choices.optionsCache[o],o);void 0===o&&""!==o||(r.find('option[value!=""]').remove(),r.val("").trigger("change"))}),jQuery('select[name="'+n+'"]').trigger("change")})}),jQuery(window).on("load",function(){UM.frontend.responsive.setClass()});