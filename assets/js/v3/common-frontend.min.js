"object"!=typeof window.UM&&(window.UM={}),"object"!=typeof UM.frontend&&(UM.frontend={}),UM.frontend={cropper:{obj:null,init:function(){let t=jQuery(".um-modal .um-modal-crop-wrapper img").first();if(t.length&&""!==t.attr("src")){UM.frontend.cropper.obj&&UM.frontend.cropper.destroy();var r=jQuery(".um-modal .um-modal-crop-wrapper"),o=t.parent().data("crop"),i=t.parent().data("min_width"),l=t.parent().data("min_height"),n=t.parent().data("ratio"),a=jQuery(".um-modal").find("#um_upload_single").data("ratio"),d=(a&&(n=a.split(":")[0]),jQuery(window).height()-(jQuery(".um-modal-buttons-wrapper").height()+20)-80-jQuery(".um-modal-header:visible").height()),a=new Image;a.src=t.attr("src"),new ResizeObserver((e,o)=>{o.disconnect(),t.css({height:"auto"}),r.css({height:"auto"}),r.css({height:d+"px","max-height":d+"px"}),t.css({height:"auto"})}).observe(a);let e;"square"===o?e={minWidth:i,minHeight:l,dragCrop:!1,aspectRatio:1,zoomable:!1,rotatable:!1,dashed:!1,scalable:!1}:"cover"===o?(0<Math.round(i/n)&&(l=Math.round(i/n)),e={minWidth:i,minHeight:l,dragCrop:!1,aspectRatio:n,zoomable:!1,rotatable:!1,dashed:!1,scalable:!1}):"user"===o&&(e={minWidth:i,minHeight:l,dragCrop:!0,aspectRatio:"auto",zoomable:!1,rotatable:!1,dashed:!1,scalable:!1}),e&&(UM.frontend.cropper.obj=new Cropper(t[0],e))}},destroy:function(){0<jQuery(".cropper-container").length&&UM.frontend.cropper.obj&&(UM.frontend.cropper.obj.destroy(),UM.frontend.cropper.obj=null)}},dropdown:{init:function(){var e=jQuery(".um-dropdown");e.length&&e.um_dropdownMenu()}},toggleElements:{init:function(){jQuery(document.body).on("click","[data-um-toggle]",function(e){e.preventDefault();let t=jQuery(this);if(!t.data("um-toggle-ignore")){t.data("um-toggle-ignore",!0);let o=jQuery(t.data("um-toggle"));(o=wp.hooks.applyFilters("um_toggle_block",o,t)).toggleClass("um-toggle-block-collapsed"),t.toggleClass("um-toggle-button-active");e=function(e){o.find(".um-toggle-block-inner").toggleClass("um-visible"),e||t.data("um-toggle-ignore",!1)};return o.hasClass("um-toggle-block-collapsed")?(e(!0),setTimeout(function(){t.data("um-toggle-ignore",!1)},500)):setTimeout(e,500),!1}})}},progressBar:{init:function(){jQuery(".um-progress-bar").each(function(){jQuery(this).find(".um-progress-bar-inner").css("width",jQuery(this).data("value")+"%")})},set:function(e,o){e.data("value",o).attr("title",o+"%"),e.find(".um-progress-bar-inner").css("width",o+"%").attr("title",o+"%"),e.siblings(".um-progress-bar-label").text(o+"%")}},responsive:{resolutions:{xs:320,s:576,m:768,l:992,xl:1024},getSize:function(e){var o,t=UM.frontend.responsive;for(o in t.resolutions)if(t.resolutions.hasOwnProperty(o)&&t.resolutions[o]===e)return o;return!1},setClass:function(){let i=UM.frontend.responsive,l=Object.values(i.resolutions);l.sort(function(e,o){return o-e}),jQuery(".um").each(function(){let r=jQuery(this);if(!r.hasClass("um-not-responsive")){let t=r.outerWidth();jQuery.each(l,function(e){e=i.getSize(l[e]);r.removeClass("um-ui-"+e)}),jQuery.each(l,function(e){var o=i.getSize(l[e]);return t>=l[e]||"xs"===o&&t<=l[e]?(r.addClass("um-ui-"+o),!1):void 0})}})}},uploaders:[],uploader:{init:function(){plupload.addFileFilter("um_files_limit",function(e,o,t){var r=this,i=wp.hooks.applyFilters("um_uploader_files_limit",r.files.length,r),o=(e&&e<=i?(this.trigger("Error",{code:-801,message:wp.i18n.__("Files limit error.","ultimate-member"),file:o}),t(!1)):t(!0),r.getOption("browse_button")[0]);let l=o.parentNode;e&&e-1<=i?(o.setAttribute("disabled","disabled"),(t=r.getOption("drop_element")[0])&&(l=t.parentNode,t.classList.add("um-dropzone-disabled"),e=t.querySelector(".um-upload-link"))&&e.classList.add("um-link-disabled"),wp.hooks.doAction("um_uploader_trigger_files_limit_true",l)):(o.removeAttribute("disabled"),r.getOption("drop_element")&&(i=r.getOption("drop_element")[0],l=i.parentNode,i.classList.remove("um-dropzone-disabled"),t=i.querySelector(".um-upload-link"))&&t.classList.remove("um-link-disabled"),wp.hooks.doAction("um_uploader_trigger_files_limit_false",l))}),jQuery(".um-uploader-button").each(function(){let a=jQuery(this),d=a.parents(".um-uploader");if(!d.data("plupload")){var o=d.find(".um-uploader-dropzone");let n=d.find(".um-uploader-filelist");var t=a.data("mime-types"),r=parseInt(a.data("max-size")),i=parseInt(a.data("max-files")),l=a.data("multiple"),u=a.data("handler"),s=a.data("nonce"),t={prevent_duplicates:!0,mime_types:t};0!==r&&(t.max_file_size=plupload.formatSize(r)),0!==i&&(t.um_files_limit=i);let e={browse_button:a.get(0),url:wp.ajax.settings.url+"?action=um_upload&handler="+u+"&nonce="+s,chunk_size:"1024kb",max_retries:1,multi_selection:l,filters:t,init:{Error:function(e,t){if(wp.hooks.doAction("um_uploader_error",d,e,t),void 0!==t.file&&n.length){n.umShow();let o=n.find("#"+t.file.id);if(o.length)o.addClass("um-upload-failed");else{var r=d.find(".um-uploader-file-placeholder").clone().addClass("um-uploader-file um-upload-failed").removeClass("um-uploader-file-placeholder um-display-none").attr("id",t.file.id);n.append(r),(o=n.find("#"+t.file.id)).find(".um-uploader-file-name").text(t.file.name);let e=t.file.name.split(".").pop();""===t.file.type&&(e="file"),o.find(".um-file-extension-text").text(e)}o.find(".um-supporting-text").html(t.message),o.find(".um-progress-bar-wrapper").remove(),wp.hooks.doAction("um_uploader_after_file_row_error",d,e,t,o)}},FileFiltered:function(t,r){var o=wp.hooks.applyFilters("um_uploader_file_filtered",null,a,t,r);if(null===o&&n.length){n.umShow(),t.getOption("multi_selection")||n.find(".um-uploader-file").each(function(e,o){t.removeFile(o.id)});o=n.find("#"+r.id);if(!o.length){var i=d.find(".um-uploader-file-placeholder").clone().addClass("um-uploader-file").removeClass("um-uploader-file-placeholder um-display-none").attr("id",r.id),l=[".um-uploaded-value",".um-uploaded-value-hash"];for(let o=0;o<l.length;o++){let e=i.find(l[o]).attr("name");e=e.replace("{{{file_id}}}",r.id),i.find(l[o]).prop("disabled",!1).attr("name",e)}n.append(i),(o=n.find("#"+r.id)).find(".um-uploader-file-name").text(r.name);let e=r.name.split(".").pop();""===r.type&&(e="file"),o.find(".um-file-extension-text").text(e),o.find(".um-supporting-text").text(plupload.formatSize(r.size)),n.hasClass("um-uploader-filelist-sortable")&&n.sortable()}}},FilesAdded:function(e,o){wp.hooks.doAction("um_uploader_files_added",d,e,o),o.length&&e.start()},FilesRemoved:function(e,o){o.length&&jQuery.each(o,function(e,o){jQuery("#"+o.id).remove()}),wp.hooks.doAction("um_uploader_files_removed",d,e,o)},FileUploaded:function(e,o,t){var r,i;200===t.status&&t.response?(i=JSON.parse(t.response))?i.info&&0===i.OK?null===wp.hooks.applyFilters("um_uploader_file_upload_failed",null,a,e,o,i)&&n.length&&((r=n.find("#"+o.id)).find(".um-supporting-text").text(i.info),r.addClass("um-upload-failed"),r.find(".um-progress-bar-wrapper").remove()):i.data&&null===wp.hooks.applyFilters("um_uploader_file_uploaded",null,a,e,o,i)&&(d.addClass("um-upload-completed"),n.length)&&((r=n.find("#"+o.id)).data("filename",i.data[0].name_saved).data("nonce",i.data[0].delete_nonce),r.find(".um-progress-bar-wrapper").remove()):null===wp.hooks.applyFilters("um_uploader_file_upload_failed",null,a,e,o,i)&&n.length&&((r=n.find("#"+o.id)).find(".um-supporting-text").text(wp.i18n.__("File was not loaded. Wrong file upload server response.","ultimate-member")),r.addClass("um-upload-failed"),r.find(".um-progress-bar-wrapper").remove()):null===wp.hooks.applyFilters("um_uploader_file_upload_failed",null,a,e,o,null)&&n.length&&((i=n.find("#"+o.id)).find(".um-supporting-text").text(wp.i18n.__("File was not loaded, Status Code ","ultimate-member")+t.status),i.addClass("um-upload-failed"),i.find(".um-progress-bar-wrapper").remove())},PostInit:function(e){},UploadProgress:function(e,o){wp.hooks.doAction("um_uploader_upload_progress",d,e,o);e=jQuery("#"+o.id).find(".um-progress-bar");e.length&&UM.frontend.progressBar.set(e,o.percent)},UploadComplete:function(e,o){wp.hooks.doAction("um_uploader_upload_complete",d,e,o)}}};o.length&&(e.drop_element=o.get(0)),(e=wp.hooks.applyFilters("um_uploader_data",e,u,a)).url&&(r=new plupload.Uploader(e),UM.frontend.uploaders[r.id]=r,d.data("plupload",r.id),r.init(),n.length)&&n.hasClass("um-uploader-filelist-sortable")&&null===wp.hooks.applyFilters("um_uploader_init_sortable_filelist",null,n,u)&&n.sortable()}})},initActions:function(){jQuery(document.body).on("dragover",".um-uploader-dropzone",function(e){let o=e.target;e.target.classList.contains("um-uploader-dropzone")||(o=o.closest(".um-uploader-dropzone")),jQuery(o).attr("drop-active",!0),e.preventDefault()}),jQuery(document.body).on("dragleave",".um-uploader-dropzone",function(e){e.preventDefault();let o=e.target;e.target.classList.contains("um-uploader-dropzone")||(o=o.closest(".um-uploader-dropzone")),jQuery(o).removeAttr("drop-active")}),jQuery(document.body).on("drop",".um-uploader-dropzone",function(e){e.preventDefault();let o=e.target;e.target.classList.contains("um-uploader-dropzone")||(o=o.closest(".um-uploader-dropzone")),jQuery(o).removeAttr("drop-active")}),jQuery(document.body).on("click",".um-upload-link:not(.um-link-disabled)",function(e){e.preventDefault(),jQuery(this).parents(".um-uploader").find(".um-uploader-button").trigger("click")}),jQuery(document.body).on("click",".um-uploader-file-remove",function(){if(!confirm(wp.i18n.__("Are you sure that you want to delete this file?","ultimate-member")))return!1;function e(){var e=i.attr("id"),o=UM.frontend.uploaders[r.data("plupload")],t=(wp.hooks.doAction("um_uploader_file_row_removed",i,e,o),o.getOption("filters").um_files_limit);o.removeFile(e),i.remove(),t&&o.files.length<t&&(o.getOption("browse_button")[0].removeAttribute("disabled"),t=o.getOption("drop_element")[0])&&(t.classList.remove("um-dropzone-disabled"),t=t.querySelector(".um-upload-link"))&&t.classList.remove("um-link-disabled"),wp.hooks.doAction("um_uploader_after_file_row_removed",r,e,o)}let r=jQuery(this).parents(".um-uploader"),i=jQuery(this).parents(".um-uploader-file");var o,t;i.attr("id")&&!i.hasClass("um-upload-failed")?(o=i.data("filename"),t=i.data("nonce"),wp.ajax.send("um_delete_temp_file",{data:{name:o,nonce:t},success:function(){e()},error:function(e){alert(e),console.log(e)}})):e()}),jQuery(document.body).on("click",".um-field-image-change",function(){if(!confirm(wp.i18n.__("Are you sure that you want to change this image?","ultimate-member")))return!1;jQuery(this).parents(".um-field-uploader-wrapper").find(".um-uploader").find(".um-uploader-button").trigger("click")}),jQuery(document.body).on("click",".um-field-image-remove",function(){var e,o=wp.i18n.__("Are you sure that you want to delete this image?","ultimate-member");if((o=wp.hooks.applyFilters("um-field-image-remove-confirm-text",o,jQuery(this)))&&!confirm(o))return!1;function t(){var e,o,t=l.attr("id");t?(e=UM.frontend.uploaders[i.data("plupload")],wp.hooks.doAction("um_uploader_file_row_removed",l,t,e),o=e.getOption("filters").um_files_limit,e.removeFile(t),l.remove(),n.umShow(),r.umHide(),a.html("").umHide(),i.removeClass("um-upload-completed"),o&&e.files.length<o&&(e.getOption("browse_button")[0].removeAttribute("disabled"),o=e.getOption("drop_element")[0])&&(o.classList.remove("um-dropzone-disabled"),o=o.querySelector(".um-upload-link"))&&o.classList.remove("um-link-disabled"),wp.hooks.doAction("um_uploader_after_file_row_removed",i,t,e)):(l.remove(),n.umShow(),r.umHide(),a.html("").umHide(),i.removeClass("um-upload-completed"))}let r=jQuery(this).parents(".um-field-image-controls"),i=jQuery(this).parents(".um-field-uploader-wrapper").find(".um-uploader"),l=i.find(".um-uploader-file"),n=i.find(".um-uploader-dropzone"),a=i.find(".um-uploader-filelist");l.attr("id")&&!l.hasClass("um-upload-failed")?(o=l.data("filename"),e=l.data("nonce"),wp.ajax.send("um_delete_temp_file",{data:{name:o,nonce:e},success:function(){t()},error:function(e){alert(e),console.log(e)}})):t()}),jQuery(document.body).on("click",".um-field-file-change",function(){if(!confirm(wp.i18n.__("Are you sure that you want to change this file?","ultimate-member")))return!1;jQuery(this).parents(".um-field-uploader-wrapper").find(".um-uploader").find(".um-uploader-button").trigger("click")}),jQuery(document.body).on("click",".um-field-file-remove",function(){if(!confirm(wp.i18n.__("Are you sure that you want to delete this file?","ultimate-member")))return!1;let r=jQuery(this).parents(".um-field-file-controls");var e,o;function t(){var e,o,t=l.attr("id");t?(e=UM.frontend.uploaders[i.data("plupload")],wp.hooks.doAction("um_uploader_file_row_removed",l,t,e),o=e.getOption("filters").um_files_limit,e.removeFile(t),l.remove(),n.umShow(),r.umHide(),a.html("").umHide(),i.removeClass("um-upload-completed"),o&&e.files.length<o&&(e.getOption("browse_button")[0].removeAttribute("disabled"),o=e.getOption("drop_element")[0])&&(o.classList.remove("um-dropzone-disabled"),o=o.querySelector(".um-upload-link"))&&o.classList.remove("um-link-disabled"),wp.hooks.doAction("um_uploader_after_file_row_removed",i,t,e)):(l.remove(),n.umShow(),r.umHide(),a.html("").umHide(),i.removeClass("um-upload-completed"))}let i=jQuery(this).parents(".um-field-uploader-wrapper").find(".um-uploader"),l=i.find(".um-uploader-file"),n=i.find(".um-uploader-dropzone"),a=i.find(".um-uploader-filelist");l.attr("id")&&!l.hasClass("um-upload-failed")?(e=l.data("filename"),o=l.data("nonce"),wp.ajax.send("um_delete_temp_file",{data:{name:e,nonce:o},success:function(){t()},error:function(e){alert(e),console.log(e)}})):t()})}},url:{parseData:function(){let o={};let t=window.location.search.substring(1).split("&");return jQuery.each(t,function(e){e=t[e].split("=");o[e[0]]=e[1]}),o},setURLSearchParam:function(e,o){var t=new URL(window.location.href);t.searchParams.set(e,o),window.history.pushState({path:t.href},"",t.href)},deleteURLSearchParam:function(e,o=!1){var t=new URL(window.location.href);t.searchParams.delete(e),o?window.location.assign(t):window.history.pushState({path:t.href},"",t.href)}},image:{lazyload:{init:function(){let t=document.querySelectorAll(".um-image-lazyload-wrapper:not(.um-inited)");for(let o=0;o<t.length;o++){t[o].classList.add("um-inited");var e=t[o].querySelector(".um-image-lazyload");e.complete?t[o].classList.add("um-loaded"):e.addEventListener("load",e=>{t[o].classList.add("um-loaded")},!1)}}}}},wp.hooks.addAction("um_remove_modal","um_common_frontend",function(){UM.frontend.cropper.destroy()}),wp.hooks.addAction("um_after_removing_preview","um_common_frontend",function(){UM.frontend.cropper.destroy()}),wp.hooks.addAction("um_window_resize","um_common_frontend",function(){UM.frontend.cropper.destroy()}),wp.hooks.addAction("um_member_directory_loaded","um_common_frontend",function(){UM.frontend.dropdown.init()}),wp.hooks.addAction("um_member_directory_build_template","um_common_frontend",function(){UM.frontend.dropdown.init()}),jQuery(document).ready(function(o){UM.frontend.dropdown.init(),UM.frontend.toggleElements.init(),UM.frontend.progressBar.init(),UM.frontend.uploader.init(),UM.frontend.uploader.initActions(),UM.frontend.image.lazyload.init(),o(window).on("resize",function(){UM.frontend.responsive.setClass()}),o(document.body).on("click",".um-alert-dismiss",function(e){e.preventDefault(),o(this).parents(".um-alert").umHide()})}),jQuery(window).on("load",function(){UM.frontend.responsive.setClass()});