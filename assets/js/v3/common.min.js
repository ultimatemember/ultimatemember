jQuery.fn.extend({umShow:function(){return this.each(function(){jQuery(this).removeClass("um-display-none")})},umHide:function(){return this.each(function(){jQuery(this).addClass("um-display-none")})},umToggle:function(){return this.each(function(){jQuery(this).toggleClass("um-display-none")})}}),"object"!=typeof window.UM&&(window.UM={}),"object"!=typeof UM.common&&(UM.common={}),UM.common={tipsy:{init:function(){"function"==typeof jQuery.fn.tipsy&&(jQuery(".um-tip-n").tipsy({gravity:"n",opacity:1,live:"a.live",offset:3}),jQuery(".um-tip-w").tipsy({gravity:"w",opacity:1,live:"a.live",offset:3}),jQuery(".um-tip-e").tipsy({gravity:"e",opacity:1,live:"a.live",offset:3}),jQuery(".um-tip-s").tipsy({gravity:"s",opacity:1,live:"a.live",offset:3}))},hide:function(){"function"==typeof jQuery.fn.tipsy&&(jQuery(".um-tip-n").tipsy("hide"),jQuery(".um-tip-w").tipsy("hide"),jQuery(".um-tip-e").tipsy("hide"),jQuery(".um-tip-s").tipsy("hide"),jQuery(".um .tipsy").remove(),jQuery(".um-page .tipsy").remove())}},rating:{init:function(){"function"==typeof jQuery.fn.um_raty&&(jQuery(".um-rating").length&&jQuery(".um-rating").um_raty({half:!1,starType:"i",number:function(){return jQuery(this).attr("data-number")},score:function(){return jQuery(this).attr("data-score")},scoreName:function(){return jQuery(this).attr("data-key")},hints:!1,click:function(e,t){um_live_field=this.id,um_live_value=e}}),jQuery(".um-rating-readonly").length)&&jQuery(".um-rating-readonly").um_raty({half:!1,starType:"i",number:function(){return jQuery(this).attr("data-number")},score:function(){return jQuery(this).attr("data-score")},scoreName:function(){return jQuery(this).attr("data-key")},hints:!1,readOnly:!0})}},select:{isSelected:function(e,t){return e===t?' selected="selected"':""}},form:{vanillaSerialize:function(e){let t;t="string"==typeof e?document.querySelector("#"+e):e[0];var i,o,n={};for([i,o]of new FormData(t))void 0!==n[i]?(Array.isArray(n[i])||(n[i]=[n[i]]),n[i].push(o)):n[i]=o;return n},sanitizeValue:function(e,t){var i=document.createElement("div"),e=(i.innerText=e,i.innerHTML);return t&&jQuery(t).val(e),e},unsanitizeValue:function(e){var t=document.createElement("textarea");return t.innerHTML=e,0===t.childNodes.length?"":t.childNodes[0].nodeValue},messageTimeout:function(e,t,i=1e3,o=null){e.html(t).umShow(),o&&o(e),setTimeout(()=>{e.html("").umHide().removeClass(["um-error-text","um-success-text"])},i)}},choices:{optionsCache:{},init:function(){let n=this;n.choicesInstances={},jQuery(".js-choice").each(function(){let i=jQuery(this);if("active"!==i.attr("data-choice")){var t,o=i[0];let e={};if(i.attr("multiple")?(i.data("min_selections"),t=i.data("max_selections"),e={removeItemButton:!0},t&&(e.maxItemCount=t)):i.hasClass("um-no-search")?e={searchEnabled:!1}:i.hasClass("um-no-native-search")&&(e={searchEnabled:!0,searchChoices:!1}),i.hasClass("um-add-choices")&&(e.addChoices=!0,e.addItems=!0),i.hasClass("um-no-native-sorting")&&(e.shouldSort=!1),i.hasClass("um-responsive")){let t=["choices","um-responsive"];["um-ui-xs","um-ui-s","um-ui-m","um-ui-l","um-ui-xl"].forEach(function(e){i.hasClass(e)&&t.push(e)}),e.classNames={containerOuter:t}}t=new Choices(o,e),n.choicesInstances[o.id]=t,wp.hooks.doAction("um_after_choices_element_init",i,t)}})},initChild:function(){var e=jQuery("select[data-um-parent]");e.length&&e.each(function(){let o=jQuery(this),n=o.data("um-parent"),a=o.data("um-ajax-source"),s=o.data("nonce");jQuery(document.body).on("change",'select[name="'+n+'"], select[name="'+n+'[]"]',function(){var e=jQuery(this),t=e.closest("form").find('input[type="hidden"][name="form_id"]').val();let i=e.val();void 0!==(i=wp.hooks.applyFilters("um_common_child_dropdown_loop_parent_value",i,o,e))&&""!==i&&"object"!=typeof UM.common.choices.optionsCache[i]?void 0!==o.um_wait&&!1!==o.um_wait||(o.um_wait=!0,t={parent_option_name:n,parent_option:i,child_callback:a,child_name:o.data("orig-name"),form_id:t,nonce:s},t=wp.hooks.applyFilters("um_common_child_dropdown_child_options_request",t,o,e),wp.ajax.send("um_select_options",{data:t,success:function(e){UM.common.choices.optionsCache[i]=e,UM.common.choices.populateChildOptions(o.attr("id"),e),void 0!==e.debug&&console.log(e),o.um_wait=!1},error:function(e){console.log(e),o.um_wait=!1}})):setTimeout(UM.common.choices.populateChildOptions,10,o.attr("id"),UM.common.choices.optionsCache[i])}),wp.hooks.doAction("um_after_init_child_loop",n,o)})},updateOptions:function(e,t,i=!1){var o=jQuery("#"+e);o&&this.choicesInstances[e]&&(e=this.choicesInstances[e],!0===i?e.removeActiveItems():(e.clearStore(),e.clearChoices(),e.removeActiveItems(),0===t.length?(o.parents(".um-directory").length||e.setChoices([{id:"",label:wp.i18n.__("None","ultimate-member"),placeholder:!0,selected:!0}],"id","label",!0),e.disable()):(e.setChoices(t,"id","label",!0),e.enable())))},populateChildOptions:function(e,t){var i=jQuery("#"+e);i.find('option[value!=""]').remove(),i.hasClass("um-child-option-disabled")||i.prop("disabled",!1);let o=[];void 0!==t&&t.items&&jQuery.each(t.items,function(e,t){""!==e?o.push({id:e,label:t,selected:!1}):o.push({id:"",label:t,placeholder:!0,selected:!0})}),UM.common.choices.updateOptions(e,o),null===wp.hooks.applyFilters("um_populate_child_options",null,i,e,t,o)&&void 0!==t&&void 0!==t.field&&(void 0!==t.field.default&&i.val(t.field.default).trigger("change"),0==t.field.editable)&&(i.addClass("um-child-option-disabled"),i.attr("disabled","disabled"))}}},jQuery(document).on("ajaxStart",function(){UM.common.tipsy.hide()}),jQuery(document).on("ajaxSuccess",function(){UM.common.tipsy.init(),UM.common.rating.init()}),jQuery(document).ready(function(){UM.common.tipsy.init(),UM.common.rating.init(),UM.common.choices.init(),UM.common.choices.initChild()});