jQuery(document).ready(function(){jQuery(document.body).on("click",".um-user-action",function(e){if(e.preventDefault(),jQuery(this).data("confirm-onclick")&&!confirm(jQuery(this).data("confirm-onclick")))return wp.hooks.addFilter("um_dropdown_link_result","ultimate-member",function(e,r,t){return!t.data("confirm-onclick")&&e}),!1;wp.hooks.removeFilter("um_dropdown_link_result","ultimate-member")}),jQuery(document.body).on("click",".um-user-posts-load-more",function(e){e.preventDefault();let t=jQuery(this),u=t.siblings(".um-user-profile-posts-loop"),o=+t.data("page")+1;t.prop("disabled",!0),t.siblings(".um-user-posts-loader").umShow(),wp.ajax.send("um_get_user_posts",{data:{author:t.data("author"),last_id:t.data("last_id"),nonce:t.data("nonce")},success:function(e){t.prop("disabled",!1),t.siblings(".um-user-posts-loader").umHide(),u.append(e.content);var r=+t.data("pages");o==r?t.remove():(t.data("page",o),t.data("last_id",e.last_id))},error:function(e){t.prop("disabled",!1),t.siblings(".um-user-posts-loader").umHide(),console.log(e)}})}),jQuery(document.body).on("click",".um-user-comments-load-more",function(e){e.preventDefault();let t=jQuery(this),u=t.siblings(".um-user-profile-comments-loop"),o=+t.data("page")+1;t.prop("disabled",!0),t.siblings(".um-user-comments-loader").umShow(),wp.ajax.send("um_get_user_comments",{data:{author:t.data("author"),last_id:t.data("last_id"),nonce:t.data("nonce")},success:function(e){t.prop("disabled",!1),t.siblings(".um-user-comments-loader").umHide(),u.append(e.content);var r=+t.data("pages");o==r?t.remove():(t.data("page",o),t.data("last_id",e.last_id))},error:function(e){t.prop("disabled",!1),t.siblings(".um-user-comments-loader").umHide(),console.log(e)}})}),jQuery(".um-profile.um-viewing .um-profile-body .um-row").each(function(){var e=jQuery(this);0==e.find(".um-field").length&&(e.prev(".um-row-heading").remove(),e.remove())}),jQuery(".um-profile.um-viewing .um-profile-body").length&&0==jQuery(".um-profile.um-viewing .um-profile-body").find(".um-field").length&&(jQuery(".um-profile.um-viewing .um-profile-body").find(".um-row-heading,.um-row").remove(),jQuery(".um-profile-note").show()),jQuery(document.body).on("click",".um-profile-save",function(e){return e.preventDefault(),jQuery(this).parents(".um.um-profile.um-editing").find("form").trigger("submit"),!1}),jQuery(document.body).on("change keyup","#um-meta-bio",function(){if(void 0!==jQuery(this).val()){var r=jQuery(this).data("character-limit"),t=jQuery(this).data("html");let e=r-jQuery(this).val().length;e=(e=1===parseInt(t)?r-jQuery(this).val().replace(/(<([^>]+)>)/gi,"").length:e)<0?0:e,jQuery("span.um-meta-bio-character span.um-bio-limit").text(e);t=e<5?"red":"";jQuery("span.um-meta-bio-character").css("color",t)}}),jQuery("#um-meta-bio").trigger("change"),jQuery(".um-profile form").each(function(){let r=jQuery(this).data("description_key");jQuery(this).find('textarea[name="'+r+'"]').length&&jQuery(document.body).on("change input",'textarea[name="'+r+'"]',function(e){jQuery(this).parents("form").find('textarea[name="'+r+'"]').each(function(){jQuery(this).val(e.currentTarget.value),jQuery("#um-meta-bio")[0]!==e.currentTarget&&jQuery("#um-meta-bio")[0]===jQuery(this)[0]&&jQuery(this).trigger("change")})})}),jQuery(".um-profile-nav a").on("touchend",function(e){jQuery(e.currentTarget).trigger("click")})});