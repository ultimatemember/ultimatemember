function um_sanitize_value(e,t){var a=document.createElement("div");a.innerText=e;a=a.innerHTML;return t&&jQuery(t).val(a),a}function um_unsanitize_value(e){var t=document.createElement("textarea");return t.innerHTML=e,0===t.childNodes.length?"":t.childNodes[0].nodeValue}function um_init_datetimepicker(){jQuery(".um-datepicker:not(.picker__input)").each(function(){var e=jQuery(this),t=!1;void 0!==e.attr("data-disabled_weekdays")&&""!==e.attr("data-disabled_weekdays")&&(t=JSON.parse(e.attr("data-disabled_weekdays")));var a=null;void 0!==e.attr("data-years")&&(a=e.attr("data-years"));var r=e.attr("data-date_min"),n=e.attr("data-date_max"),i=[],u=[];void 0!==r&&(i=r.split(",")),void 0!==n&&(u=n.split(","));var r=i.length?new Date(i):null,n=i.length?new Date(u):null;r&&"Invalid Date"==r.toString()&&3==i.length&&(i=i[1]+"/"+i[2]+"/"+i[0],r=new Date(Date.parse(i))),n&&"Invalid Date"==n.toString()&&3==u.length&&(u=u[1]+"/"+u[2]+"/"+u[0],n=new Date(Date.parse(u)));t={disable:t,format:e.attr("data-format"),formatSubmit:"yyyy/mm/dd",hiddenName:!0,onOpen:function(){e.blur()},onClose:function(){e.blur()}};null!==a&&(t.selectYears=a),null!==r&&(t.min=r),null!==n&&(t.max=n),e.pickadate(t)}),jQuery(".um-timepicker:not(.picker__input)").each(function(){var e=jQuery(this);e.pickatime({format:e.attr("data-format"),interval:parseInt(e.attr("data-intervals")),formatSubmit:"HH:i",hiddenName:!0,onOpen:function(){e.blur()},onClose:function(){e.blur()}})})}function init_tipsy(){"function"==typeof jQuery.fn.tipsy&&(jQuery(".um-tip-n").tipsy({gravity:"n",opacity:1,live:"a.live",offset:3}),jQuery(".um-tip-w").tipsy({gravity:"w",opacity:1,live:"a.live",offset:3}),jQuery(".um-tip-e").tipsy({gravity:"e",opacity:1,live:"a.live",offset:3}),jQuery(".um-tip-s").tipsy({gravity:"s",opacity:1,live:"a.live",offset:3}))}jQuery(document).ready(function(){function r(e){var a=jQuery(e.currentTarget),e=a.find(":selected");1<e.length&&e.each(function(e,t){""===t.value&&(t.selected=!1,a.trigger("change"))})}jQuery(document.body).on("click",".um-dropdown a.real_url",function(){window.location=jQuery(this).attr("href")}),jQuery(document.body).on("click",".um-trigger-menu-on-click",function(){var e=jQuery(this).find(".um-dropdown");return UM.dropdown.show(e),!1}),jQuery(document.body).on("click",".um-dropdown-hide",function(){return UM.dropdown.hideAll(),!1}),jQuery(document.body).on("click","a.um-manual-trigger",function(){var e=jQuery(this).attr("data-child"),t=jQuery(this).attr("data-parent");return jQuery(this).parents(t).find(e).trigger("click"),UM.dropdown.hideAll(),!1}),jQuery(".um-s1,.um-s2").css({display:"block"}),"function"==typeof jQuery.fn.select2&&(jQuery(".um-s1").each(function(e){var t=jQuery(this);t.select2({containerCssClass:"um-select2-selection",dropdownCssClass:"um-select2-dropdown",allowClear:!0,dropdownParent:t.parent()}).on("change",r)}),jQuery(".um-s2").each(function(e){var t=jQuery(this),a={},a=t.parents(".um-custom-shortcode-tab").length?{containerCssClass:"um-select2-selection",dropdownCssClass:"um-select2-dropdown",allowClear:!1}:{containerCssClass:"um-select2-selection",dropdownCssClass:"um-select2-dropdown",allowClear:!1,minimumResultsForSearch:10,dropdownParent:t.parent()};t.select2(a).on("change",r)}),jQuery(".um-s3").each(function(e){var t=jQuery(this);t.select2({containerCssClass:"um-select2-selection",dropdownCssClass:"um-select2-dropdown",allowClear:!1,minimumResultsForSearch:-1,dropdownParent:t.parent()}).on("change",r)})),init_tipsy(),"function"==typeof jQuery.fn.um_raty&&(jQuery(".um-rating").um_raty({half:!1,starType:"i",number:function(){return jQuery(this).attr("data-number")},score:function(){return jQuery(this).attr("data-score")},scoreName:function(){return jQuery(this).attr("data-key")},hints:!1,click:function(e,t){um_live_field=this.id,um_live_value=e,um_apply_conditions(jQuery(this),!1)}}),jQuery(".um-rating-readonly").um_raty({half:!1,starType:"i",number:function(){return jQuery(this).attr("data-number")},score:function(){return jQuery(this).attr("data-score")},scoreName:function(){return jQuery(this).attr("data-key")},hints:!1,readOnly:!0})),jQuery(document).on("change",'.um-field-area input[type="radio"]',function(){var e=jQuery(this).parents(".um-field-area"),t=jQuery(this).parents("label");e.find(".um-field-radio").removeClass("active"),e.find(".um-field-radio").find("i").removeAttr("class").addClass("far fa-circle"),t.addClass("active"),t.find("i").removeAttr("class").addClass("far fa-dot-circle")}),jQuery(document).on("change",'.um-field-area input[type="checkbox"]',function(){var e=jQuery(this).parents("label");e.hasClass("active")?(e.removeClass("active"),e.find("i").removeAttr("class").addClass("far fa-square")):(e.addClass("active"),e.find("i").removeAttr("class").addClass("far fa-check-square"))}),um_init_datetimepicker(),jQuery(document).on("click",".um .um-single-image-preview a.cancel",function(e){e.preventDefault();var t=jQuery(this).parents(".um-field"),a=t.find('input[type="hidden"]#'+t.data("key")+"-"+jQuery(this).parents("form").find('input[type="hidden"][name="form_id"]').val()).val(),r=jQuery(this).parents(".um-field").find(".um-single-image-preview img").attr("src"),e=t.data("mode"),r={data:{mode:e,filename:a,src:r,nonce:um_scripts.nonce},success:function(){t.find(".um-single-image-preview img").attr("src",""),t.find(".um-single-image-preview").hide(),t.find(".um-btn-auto-width").html(t.data("upload-label")),t.find('input[type="hidden"]').val("empty_file")}};return"register"!==e&&(r.data.user_id=jQuery(this).parents("form").find("#user_id").val()),wp.ajax.send("um_remove_file",r),!1}),jQuery(document).on("click",".um .um-single-file-preview a.cancel",function(e){e.preventDefault();var t=jQuery(this).parents(".um-field"),a=t.find('input[type="hidden"]#'+t.data("key")+"-"+jQuery(this).parents("form").find('input[type="hidden"][name="form_id"]').val()).val(),r=jQuery(this).parents(".um-field").find(".um-single-fileinfo a").attr("href"),e=t.data("mode"),r={data:{mode:e,filename:a,src:r,nonce:um_scripts.nonce},success:function(){t.find(".um-single-file-preview").hide(),t.find(".um-btn-auto-width").html(t.data("upload-label")),t.find("input[type=hidden]").val("empty_file")}};return"register"!==e&&(r.data.user_id=jQuery(this).parents("form").find("#user_id").val()),wp.ajax.send("um_remove_file",r),!1}),jQuery(document).on("click",".um-field-group-head:not(.disabled)",function(){var e=jQuery(this).parents(".um-field-group"),t=e.data("max_entries");e.find(".um-field-group-body").is(":hidden")?e.find(".um-field-group-body").show():e.find(".um-field-group-body:first").clone().appendTo(e);var a=0;e.find(".um-field-group-body").each(function(){a++,jQuery(this).find("input").each(function(){var e=jQuery(this);e.attr("id",e.data("key")+"-"+a),e.attr("name",e.data("key")+"-"+a),e.parent().parent().find("label").attr("for",e.data("key")+"-"+a)})}),0<t&&e.find(".um-field-group-body").length==t&&jQuery(this).addClass("disabled")}),jQuery(document).on("click",".um-field-group-cancel",function(e){e.preventDefault();var t=jQuery(this).parents(".um-field-group"),e=t.data("max_entries");return 1<t.find(".um-field-group-body").length?jQuery(this).parents(".um-field-group-body").remove():jQuery(this).parents(".um-field-group-body").hide(),0<e&&t.find(".um-field-group-body").length<e&&t.find(".um-field-group-head").removeClass("disabled"),!1}),jQuery(document.body).on("click",".um-ajax-paginate",function(e){e.preventDefault();var t=jQuery(this),a=t.parent();a.addClass("loading");var r,n=+t.data("pages"),i=+t.data("page")+1,u=t.data("hook");"um_load_posts"===u?jQuery.ajax({url:wp.ajax.settings.url,type:"post",data:{action:"um_ajax_paginate_posts",author:jQuery(this).data("author"),page:i,nonce:um_scripts.nonce},complete:function(){a.removeClass("loading")},success:function(e){a.before(e),i==n?a.remove():t.data("page",i)}}):"um_load_comments"===u?jQuery.ajax({url:wp.ajax.settings.url,type:"post",data:{action:"um_ajax_paginate_comments",user_id:jQuery(this).data("user_id"),page:i,nonce:um_scripts.nonce},complete:function(){a.removeClass("loading")},success:function(e){a.before(e),i==n?a.remove():t.data("page",i)}}):(e=jQuery(this).data("args"),r=jQuery(this).parents(".um").find(".um-ajax-items"),jQuery.ajax({url:wp.ajax.settings.url,type:"post",data:{action:"um_ajax_paginate",hook:u,args:e,nonce:um_scripts.nonce},complete:function(){a.removeClass("loading")},success:function(e){a.remove(),r.append(e)}}))}),jQuery(document).on("click",".um-ajax-action",function(e){e.preventDefault();var t=jQuery(this).data("hook"),a=jQuery(this).data("user_id"),arguments=jQuery(this).data("arguments");return jQuery(this).data("js-remove")&&jQuery(this).parents("."+jQuery(this).data("js-remove")).fadeOut("fast"),jQuery.ajax({url:wp.ajax.settings.url,type:"post",data:{action:"um_muted_action",hook:t,user_id:a,arguments:arguments,nonce:um_scripts.nonce},success:function(e){}}),!1}),jQuery(document.body).on("click","#um-search-button",function(){var e=jQuery(this).parents(".um-search-form").data("members_page"),t=[];jQuery(this).parents(".um-search-form").find('input[name="um-search-keys[]"]').each(function(){t.push(jQuery(this).val())});var a,r=jQuery(this).parents(".um-search-form").find(".um-search-field").val();if(""===r)a=e;else{for(var n="?",i=0;i<t.length;i++)n+=t[i]+"="+r,i!==t.length-1&&(n+="&");a=e+n}window.location=a}),jQuery(document.body).on("keypress",".um-search-field",function(e){if(13===e.which){var e=jQuery(this).parents(".um-search-form").data("members_page"),t=[];jQuery(this).parents(".um-search-form").find('input[name="um-search-keys[]"]').each(function(){t.push(jQuery(this).val())});var a,r=jQuery(this).val();if(""===r)a=e;else{for(var n="?",i=0;i<t.length;i++)n+=t[i]+"="+r,i!==t.length-1&&(n+="&");a=e+n}window.location=a}}),jQuery('.um-form input[class="um-button"][type="submit"]').prop("disabled",!1),jQuery(document).one("click",'.um:not(.um-account) .um-form input[class="um-button"][type="submit"]:not(.um-has-recaptcha)',function(){jQuery(this).attr("disabled","disabled"),jQuery(this).parents("form").trigger("submit")});var s={};function o(t,e,a){var r=t.parents(".um-directory"),n=t.attr("name");t.find('option[value!=""]').remove(),t.hasClass("um-child-option-disabled")||t.prop("disabled",!1);var i,u,s=[];"yes"===e.post.members_directory&&s.push({id:"",text:"",selected:1}),jQuery.each(e.items,function(e,t){s.push({id:e,text:t,selected:""===t})}),t.select2("destroy"),t.select2({data:s,allowClear:!0,minimumResultsForSearch:10,containerCssClass:"um-select2-selection",dropdownCssClass:"um-select2-dropdown"}),"yes"===e.post.members_directory&&(t.find("option").each(function(){""!==jQuery(this).html()&&jQuery(this).data("value_label",jQuery(this).html()).attr("data-value_label",jQuery(this).html())}),void 0!==(i=um_get_data_for_directory(r,"filter_"+n))&&(i=i.split("||"),u=[],jQuery.each(i,function(e){t.find('option[value="'+i[e]+'"]').length&&u.push(i[e]),t.find('option[value="'+i[e]+'"]').prop("disabled",!0).hide(),1===t.find("option:not(:disabled)").length&&t.prop("disabled",!0),t.select2("destroy").select2({containerCssClass:"um-select2-selection",dropdownCssClass:"um-select2-dropdown"}),t.val("").trigger("change")}),u=u.join("||"),i!==u&&(um_set_url_from_data(r,"filter_"+n,u),um_ajax_get_members(r))),um_change_tag(r)),"yes"!==e.post.members_directory&&(void 0===e.field.default||t.data("um-original-value")?""!==t.data("um-original-value")&&t.val(t.data("um-original-value")).trigger("change"):t.val(e.field.default).trigger("change"),0==e.field.editable&&(t.addClass("um-child-option-disabled"),t.attr("disabled","disabled")))}jQuery("select[data-um-parent]").each(function(){var n=jQuery(this),i=n.data("um-parent"),u=n.data("um-ajax-source");n.attr("data-um-init-field",!0),jQuery(document).on("change",'select[name="'+i+'"]',function(){var e,t,a=jQuery(this),r=a.closest("form").find('input[type="hidden"][name="form_id"]').val();if(void 0!==(t="yes"===n.attr("data-member-directory")?(e=a.parents(".um-directory"),void 0!==(t=um_get_data_for_directory(e,"filter_"+i))?t.split("||"):""):a.val())&&""!==t&&"object"!=typeof s[t]){if(void 0!==n.um_wait&&!1!==n.um_wait)return;n.um_wait=!0,jQuery.ajax({url:wp.ajax.settings.url,type:"post",data:{action:"um_select_options",parent_option_name:i,parent_option:t,child_callback:u,child_name:n.attr("name"),members_directory:n.attr("data-member-directory"),form_id:r,nonce:um_scripts.nonce},success:function(e){"success"===e.status&&""!==t&&(s[t]=e,o(n,e)),void 0!==e.debug&&console.log(e),n.um_wait=!1},error:function(e){console.log(e),n.um_wait=!1}})}void 0!==t&&""!==t&&"object"==typeof s[t]&&setTimeout(o,10,n,s[t],t),void 0===t&&""!==t||(n.find('option[value!=""]').remove(),n.val("").trigger("change"))}),jQuery('select[name="'+i+'"]').trigger("change")})});