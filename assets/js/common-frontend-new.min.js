"object"!=typeof window.UM&&(window.UM={}),"object"!=typeof UM.frontend&&(UM.frontend={}),UM.frontend={cropper:{obj:null,init:function(){let t=jQuery(".um-modal .um-profile-photo-crop-wrapper img").first();if(t.length&&""!==t.attr("src")){UM.frontend.cropper.obj&&UM.frontend.cropper.destroy();var r=jQuery(".um-modal .um-profile-photo-crop-wrapper"),o=t.parent().data("crop"),n=t.parent().data("min_width"),a=t.parent().data("min_height"),l=t.parent().data("ratio"),i=jQuery(".um-modal").find("#um_upload_single").data("ratio"),d=(i&&(l=i.split(":")[0]),jQuery(window).height()-(jQuery(".um-modal-buttons-wrapper").height()+20)-80-jQuery(".um-modal-header:visible").height()),i=new Image;i.src=t.attr("src"),new ResizeObserver((e,o)=>{o.disconnect(),t.css({height:"auto"}),r.css({height:"auto"}),r.css({height:d+"px","max-height":d+"px"}),t.css({height:"auto"})}).observe(i);let e;"square"===o?e={minWidth:n,minHeight:a,dragCrop:!1,aspectRatio:1,zoomable:!1,rotatable:!1,dashed:!1}:"cover"===o?(0<Math.round(n/l)&&(a=Math.round(n/l)),e={minWidth:n,minHeight:a,dragCrop:!1,aspectRatio:l,zoomable:!1,rotatable:!1,dashed:!1}):"user"===o&&(e={minWidth:n,minHeight:a,dragCrop:!0,aspectRatio:"auto",zoomable:!1,rotatable:!1,dashed:!1}),e&&(UM.frontend.cropper.obj=new Cropper(t[0],e))}},destroy:function(){0<jQuery(".cropper-container").length&&UM.frontend.cropper.obj&&(UM.frontend.cropper.obj.destroy(),UM.frontend.cropper.obj=null)}},dropdown:{init:function(){var e=jQuery(".um-dropdown");e.length&&e.um_dropdownMenu()}},toggleElements:{init:function(){jQuery(document.body).on("click","[data-um-toggle]",function(e){e.preventDefault();let t=jQuery(this);if(!t.data("um-toggle-ignore")){t.data("um-toggle-ignore",!0);let o=jQuery(t.data("um-toggle"));(o=wp.hooks.applyFilters("um_toggle_block",o,t)).toggleClass("um-toggle-block-collapsed"),t.toggleClass("um-toggle-button-active");e=function(e){o.find(".um-toggle-block-inner").toggleClass("um-visible"),e||t.data("um-toggle-ignore",!1)};return o.hasClass("um-toggle-block-collapsed")?(e(!0),setTimeout(function(){t.data("um-toggle-ignore",!1)},500)):setTimeout(e,500),!1}})}},progressBar:{init:function(){jQuery(".um-progress-bar").each(function(){jQuery(this).find(".um-progress-bar-inner").css("width",jQuery(this).data("value")+"%")})},set:function(e,o){e.data("value",o).attr("title",o+"%"),e.find(".um-progress-bar-inner").css("width",o+"%").attr("title",o+"%"),e.siblings(".um-progress-bar-label").text(o+"%")}},responsive:{resolutions:{xs:320,s:576,m:768,l:992,xl:1024},getSize:function(e){var o,t=UM.frontend.responsive;for(o in t.resolutions)if(t.resolutions.hasOwnProperty(o)&&t.resolutions[o]===e)return o;return!1},setClass:function(){let n=UM.frontend.responsive,a=Object.values(n.resolutions);a.sort(function(e,o){return o-e}),jQuery(".um").each(function(){let r=jQuery(this);if(!r.hasClass("um-not-responsive")){let t=r.outerWidth();jQuery.each(a,function(e){e=n.getSize(a[e]);r.removeClass("um-ui-"+e)}),jQuery.each(a,function(e){var o=n.getSize(a[e]);return t>=a[e]||"xs"===o&&t<=a[e]?(r.addClass("um-ui-"+o),!1):void 0})}})}},uploaders:[],uploader:{init:function(){jQuery(".um-uploader-button").each(function(){let i=jQuery(this),d=i.parents(".um-uploader");if(!d.data("plupload")){var o=d.find(".um-uploader-dropzone");let l=d.find(".um-uploader-filelist");var t=i.data("mime-types"),r=parseInt(i.data("max-size")),n=i.data("multiple"),a=i.data("handler"),u=i.data("nonce"),t={prevent_duplicates:!0,mime_types:t};0!==r&&(t.max_file_size=plupload.formatSize(r));let e={browse_button:i.get(0),url:wp.ajax.settings.url+"?action=um_upload&handler="+a+"&nonce="+u,chunk_size:"1024kb",max_retries:1,multi_selection:n,filters:t,init:{Error:function(t,r){if(wp.hooks.doAction("um_uploader_error",d,t,r),void 0!==r.file&&l.length){l.umShow();let o=l.find("#"+r.file.id);if(o.length)o.addClass("um-upload-failed");else{t=d.find(".um-uploader-file-placeholder").clone().addClass("um-uploader-file um-upload-failed").removeClass("um-uploader-file-placeholder um-display-none").attr("id",r.file.id);l.append(t),(o=l.find("#"+r.file.id)).find(".um-uploader-file-name").text(r.file.name);let e=r.file.name.split(".").pop();""===r.file.type&&(e="file"),o.find(".um-file-extension-text").text(e)}o.find(".um-supporting-text").text(r.message),o.find(".um-progress-bar-wrapper").remove()}},FileFiltered:function(t,r){var o=wp.hooks.applyFilters("um_uploader_file_filtered",null,i,t,r);if(null===o&&l.length){l.umShow(),t.getOption("multi_selection")||l.find(".um-uploader-file").each(function(e,o){t.removeFile(o.id)});o=l.find("#"+r.id);if(!o.length){var n=d.find(".um-uploader-file-placeholder").clone().addClass("um-uploader-file").removeClass("um-uploader-file-placeholder um-display-none").attr("id",r.id),a=[".um-uploaded-value",".um-uploaded-value-hash"];for(let o=0;o<a.length;o++){let e=n.find(a[o]).attr("name");e=e.replace("{{{file_id}}}",r.id),n.find(a[o]).prop("disabled",!1).attr("name",e)}l.append(n),(o=l.find("#"+r.id)).find(".um-uploader-file-name").text(r.name);let e=r.name.split(".").pop();""===r.type&&(e="file"),o.find(".um-file-extension-text").text(e),o.find(".um-supporting-text").text(plupload.formatSize(r.size)),l.hasClass("um-uploader-filelist-sortable")&&l.sortable()}}},FilesAdded:function(e,o){wp.hooks.doAction("um_uploader_files_added",d,e,o),o.length&&e.start()},FilesRemoved:function(e,o){o.length&&jQuery.each(o,function(e,o){jQuery("#"+o.id).remove()}),wp.hooks.doAction("um_uploader_files_removed",d,e,o)},FileUploaded:function(e,o,t){var r,n;200===t.status&&t.response?(n=JSON.parse(t.response))?n.info&&0===n.OK?null===wp.hooks.applyFilters("um_uploader_file_upload_failed",null,i,e,o,n)&&l.length&&((r=l.find("#"+o.id)).find(".um-supporting-text").text(n.info),r.addClass("um-upload-failed"),r.find(".um-progress-bar-wrapper").remove()):n.data&&null===wp.hooks.applyFilters("um_uploader_file_uploaded",null,i,e,o,n)&&l.length&&((r=l.find("#"+o.id)).data("filename",n.data[0].name_saved).data("nonce",n.data[0].delete_nonce),r.find(".um-progress-bar-wrapper").remove(),r.addClass("um-upload-completed")):null===wp.hooks.applyFilters("um_uploader_file_upload_failed",null,i,e,o,n)&&l.length&&((r=l.find("#"+o.id)).find(".um-supporting-text").text(wp.i18n.__("File was not loaded. Wrong file upload server response.","ultimate-member")),r.addClass("um-upload-failed"),r.find(".um-progress-bar-wrapper").remove()):null===wp.hooks.applyFilters("um_uploader_file_upload_failed",null,i,e,o,null)&&l.length&&((n=l.find("#"+o.id)).find(".um-supporting-text").text(wp.i18n.__("File was not loaded, Status Code ","ultimate-member")+t.status),n.addClass("um-upload-failed"),n.find(".um-progress-bar-wrapper").remove())},PostInit:function(e){},UploadProgress:function(e,o){wp.hooks.doAction("um_uploader_upload_progress",d,e,o);e=jQuery("#"+o.id).find(".um-progress-bar");e.length&&UM.frontend.progressBar.set(e,o.percent)},UploadComplete:function(e,o){wp.hooks.doAction("um_uploader_upload_complete",d,e,o)}}};o.length&&(e.drop_element=o.get(0)),(e=wp.hooks.applyFilters("um_uploader_data",e,a,i)).url&&(r=new plupload.Uploader(e),UM.frontend.uploaders[r.id]=r,d.data("plupload",r.id),r.init(),l.length)&&l.hasClass("um-uploader-filelist-sortable")&&null===wp.hooks.applyFilters("um_uploader_init_sortable_filelist",null,l,a)&&l.sortable()}})},initActions:function(){jQuery(document.body).on("dragover",".um-uploader-dropzone",function(e){let o=e.target;e.target.classList.contains("um-uploader-dropzone")||(o=o.closest(".um-uploader-dropzone")),jQuery(o).attr("drop-active",!0),e.preventDefault()}),jQuery(document.body).on("dragleave",".um-uploader-dropzone",function(e){e.preventDefault();let o=e.target;e.target.classList.contains("um-uploader-dropzone")||(o=o.closest(".um-uploader-dropzone")),jQuery(o).removeAttr("drop-active")}),jQuery(document.body).on("drop",".um-uploader-dropzone",function(e){e.preventDefault();let o=e.target;e.target.classList.contains("um-uploader-dropzone")||(o=o.closest(".um-uploader-dropzone")),jQuery(o).removeAttr("drop-active")}),jQuery(document.body).on("click",".um-upload-link",function(e){e.preventDefault(),jQuery(this).parents(".um-uploader").find(".um-uploader-button").trigger("click")}),jQuery(document.body).on("click",".um-uploader-file-remove",function(){if(!confirm(wp.i18n.__("Are you sure that you want to delete this file?","ultimate-member")))return!1;function e(){var e=r.attr("id"),o=UM.frontend.uploaders[t.data("plupload")];wp.hooks.doAction("um_uploader_file_row_removed",r,e,o),o.removeFile(e),r.remove(),wp.hooks.doAction("um_uploader_after_file_row_removed",t,e,o)}let t=jQuery(this).parents(".um-uploader"),r=jQuery(this).parents(".um-uploader-file");var o,n;r.hasClass("um-upload-failed")?e():(o=r.data("filename"),n=r.data("nonce"),wp.ajax.send("um_delete_temp_file",{data:{name:o,nonce:n},success:function(){e()},error:function(e){alert(e),console.log(e)}}))})}},url:{parseData:function(){let o={};let t=window.location.search.substring(1).split("&");return jQuery.each(t,function(e){e=t[e].split("=");o[e[0]]=e[1]}),o},setURLSearchParam:function(e,o){var t=new URL(window.location.href);t.searchParams.set(e,o),window.history.pushState({path:t.href},"",t.href)},deleteURLSearchParam:function(e,o=!1){var t=new URL(window.location.href);t.searchParams.delete(e),o?window.location.assign(t):window.history.pushState({path:t.href},"",t.href)}},choices:{init:function(){jQuery(".js-choice").each(function(){let e=null;e=jQuery(this).attr("multiple")?new Choices(jQuery(this)[0],{removeItemButton:!0}):jQuery(this).hasClass("um-no-search")?new Choices(jQuery(this)[0],{searchEnabled:!1}):new Choices(jQuery(this)[0]);var o=jQuery(this).closest("form")[0];o&&o.addEventListener("reset",()=>{e.destroy(),e.init()})})}},slider:{controlFromSlider:function(e,o){var[t,r]=UM.frontend.slider.getParsed(e,o);UM.frontend.slider.fillSlider(e,o,um_frontend_common_variables.colors.gray200,um_frontend_common_variables.colors.primary600bg,o),r<t&&(e.value=r)},controlToSlider:function(e,o){var[t,r]=UM.frontend.slider.getParsed(e,o);UM.frontend.slider.fillSlider(e,o,um_frontend_common_variables.colors.gray200,um_frontend_common_variables.colors.primary600bg,o),UM.frontend.slider.setToggleAccessible(o),o.value=t<=r?r:t},replacePlaceholder:function(t,r,n){t=t.closest(".um-range-container").querySelector(".um-range-placeholder");if(t&&t.dataset.placeholderS&&t.dataset.placeholderP&&t.dataset.label)if(r===n)t.innerHTML=t.dataset.placeholderS.replace("{{{value}}}",r).replace("{{{label}}}",t.dataset.label);else{let e=r,o=n;e>o?e=o:o<e&&(o=e),o===e?t.innerHTML=t.dataset.placeholderS.replace("{{{value}}}",e).replace("{{{label}}}",t.dataset.label):t.innerHTML=t.dataset.placeholderP.replace("{{{value_from}}}",e).replace("{{{value_to}}}",o).replace("{{{label}}}",t.dataset.label)}},getParsed:function(e,o){var t=parseInt(e.value,10),o=parseInt(o.value,10);return UM.frontend.slider.replacePlaceholder(e,t,o),[t,o]},fillSlider:function(e,o,t,r,n){var a=o.max-o.min,l=e.value-o.min,o=o.value-o.min,e=23/(e.offsetWidth/100);n.style.background=0==l?`linear-gradient(
				  to right,
				  transparent 0%,
				  transparent ${e}%,
				  ${t} ${l/a*100}%,
				  ${r} ${l/a*100}%,
				  ${r} ${o/a*100}%,
				  ${t} ${o/a*100}%,
				  ${t} 100%)`:`linear-gradient(
				  to right,
				  ${t} 0%,
				  ${t} ${l/a*100}%,
				  ${r} ${l/a*100}%,
				  ${r} ${o/a*100}%,
				  ${t} ${o/a*100}%,
				  ${t} 100%)`},setToggleAccessible:function(e){Number(e.value)<=e.min?e.style.zIndex=2:e.style.zIndex=0},init:function(){jQuery(".um-range-container").each(function(){let e=jQuery(this).find(".um-from-slider")[0],o=jQuery(this).find(".um-to-slider")[0];var t=jQuery(this).find(".um-sliders-control")[0];e&&o&&(UM.frontend.slider.fillSlider(e,o,um_frontend_common_variables.colors.gray200,um_frontend_common_variables.colors.primary600bg,o),UM.frontend.slider.setToggleAccessible(o),e.oninput=()=>UM.frontend.slider.controlFromSlider(e,o),o.oninput=()=>UM.frontend.slider.controlToSlider(e,o)),t&&(t.addEventListener("mouseover",function(){UM.frontend.slider.fillSlider(e,o,um_frontend_common_variables.colors.gray300,um_frontend_common_variables.colors.primary700bg,o)}),t.addEventListener("mouseout",function(){UM.frontend.slider.fillSlider(e,o,um_frontend_common_variables.colors.gray200,um_frontend_common_variables.colors.primary600bg,o)}),t=t.closest("form"))&&t.addEventListener("reset",function(){setTimeout(function(){UM.frontend.slider.fillSlider(e,o,um_frontend_common_variables.colors.gray200,um_frontend_common_variables.colors.primary600bg,o),UM.frontend.slider.replacePlaceholder(e,e.value,o.value)},1)})})}},image:{lazyload:{init:function(){let t=document.querySelectorAll(".um-image-lazyload-wrapper:not(.um-inited)");for(let o=0;o<t.length;o++){t[o].classList.add("um-inited");var e=t[o].querySelector(".um-image-lazyload");e.complete?t[o].classList.add("um-loaded"):e.addEventListener("load",e=>{t[o].classList.add("um-loaded")},!1)}}}}},wp.hooks.addAction("um_remove_modal","um_common_frontend",function(){UM.frontend.cropper.destroy()}),wp.hooks.addAction("um_after_removing_preview","um_common_frontend",function(){UM.frontend.cropper.destroy()}),wp.hooks.addAction("um_window_resize","um_common_frontend",function(){UM.frontend.cropper.destroy()}),wp.hooks.addAction("um_member_directory_loaded","um_common_frontend",function(){UM.frontend.dropdown.init()}),wp.hooks.addAction("um_member_directory_build_template","um_common_frontend",function(){UM.frontend.dropdown.init()}),jQuery(document).ready(function(o){UM.frontend.dropdown.init(),UM.frontend.toggleElements.init(),UM.frontend.progressBar.init(),UM.frontend.uploader.init(),UM.frontend.uploader.initActions(),UM.frontend.slider.init(),UM.frontend.choices.init(),UM.frontend.image.lazyload.init(),o(window).on("resize",function(){UM.frontend.responsive.setClass()}),o(document.body).on("click",".um-alert-dismiss",function(e){e.preventDefault(),o(this).parents(".um-alert").umHide()})}),jQuery(window).on("load",function(){UM.frontend.responsive.setClass()});